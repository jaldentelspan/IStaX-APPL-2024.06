# Copyright (c) 2006-2024 Microsemi Corporation "Microsemi". All Rights Reserved.
#
# Unpublished rights reserved under the copyright laws of the United States of
# America, other countries and international treaties. Permission to use, copy,
# store and modify, the software and its source code is granted but only in
# connection with products utilizing the Microsemi switch and PHY products.
# Permission is also granted for you to integrate into other products, disclose,
# transmit and distribute the software only in an absolute machine readable
# format (e.g. HEX file) and only in or with products utilizing the Microsemi
# switch and PHY products.  The source code of the software may not be
# disclosed, transmitted or distributed without the prior written permission of
# Microsemi.
#
# This copyright notice must appear in any copy, modification, disclosure,
# transmission or distribution of the software.  Microsemi retains all
# ownership, copyright, trade secret and proprietary rights in the software and
# its source code, including all modifications thereto.
#
# THIS SOFTWARE HAS BEEN PROVIDED "AS IS". MICROSEMI HEREBY DISCLAIMS ALL
# WARRANTIES OF ANY KIND WITH RESPECT TO THE SOFTWARE, WHETHER SUCH WARRANTIES
# ARE EXPRESS, IMPLIED, STATUTORY OR OTHERWISE INCLUDING, WITHOUT LIMITATION,
# WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR USE OR PURPOSE AND
# NON-INFRINGEMENT.

# Microchip is aware that some terminology used in this technical document is
# antiquated and inappropriate. As a result of the complex nature of software
# where seemingly simple changes have unpredictable, and often far-reaching
# negative results on the software's functionality (requiring extensive retesting
# and revalidation) we are unable to make the desired changes in all legacy
# systems without compromising our product or our clients' products.

MODULE_IF_FLAG = defined(VTSS_SW_OPTION_PTP)

INCLUDE_BEGIN
#include "ptp_icli_functions.h"
#include "icli_porting_util.h"
INCLUDE_END

ICLI_HELP_PTP = Precision time Protocol (1588)

FUNCTION_BEGIN

FUNCTION_END

EXPORT_BEGIN
EXPORT_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp <0-3> { default | current | parent | time-property | filter | servo | clk | ho | uni | master-table-unicast | slave [details] | { { port-state | port-statistics | port-ds | wireless | foreign-master-record } [ interface <port_type_list> ] }  | log-mode }

DOC_CMD_DESC    = Show various PTP data
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp 0 current

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_0
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: <0-3>
! 4: default
! 5: current
! 6: parent
! 7: time-property
! 8: filter
! 9: servo
! 10: clk
! 11: ho
! 12: uni
! 13: master-table-unicast
! 14: slave
! 15: details
! 16: port-state
! 17: port-statistics
! 18: port-ds
! 19: wireless
! 20: foreign-master-record
! 21: interface
! 22: <port_type_list>
! 23: log-mode

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR = has_default
CMD_VAR = has_current
CMD_VAR = has_parent
CMD_VAR = has_time_property
CMD_VAR = has_filter
CMD_VAR = has_servo
CMD_VAR = has_clk
CMD_VAR = has_ho
CMD_VAR = has_uni
CMD_VAR = has_master_table_unicast
CMD_VAR = has_slave
CMD_VAR = has_details
CMD_VAR = has_port_state
CMD_VAR = has_port_statistics
CMD_VAR = has_port_ds
CMD_VAR = has_wireless
CMD_VAR = has_foreign_master_record
CMD_VAR = has_interface
CMD_VAR = v_port_type_list
CMD_VAR = has_log_mode

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_filter_type_basic_option
RUNTIME = ptp_icli_filter_type_basic_option
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_wireless_option
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = ##ICLI_HELP_PTP
HELP = Show various PTP data
HELP = Show PTP default data set (IEEE1588 paragraph 8.2.1).
HELP = Show PTP current data set (IEEE1588 paragraph 8.2.2).
HELP = Show PTP parent data set (IEEE1588 paragraph 8.2.3).
HELP = Show PTP time properties data set (IEEE1588 paragraph 8.2.4).
HELP = Show PTP filter parameters.
HELP = Show PTP servo parameters.
HELP = Show PTP slave clock options parameters.
HELP = Show PTP slave holdover parameters.
HELP = Show PTP slave unicast configuration parameters.
HELP = Show PTP master list of connected unicast slaves.
HELP = Show PTP slave clock lock threshold parameters.
HELP = Show PTP slave clock lock threshold parameters in detailed view.
HELP = Show PTP port state.
HELP = Show PTP port statistics.
HELP = Show PTP port data set (IEEE1588 paragraph 8.2.5).
HELP = Show PTP port wireless parameters.
HELP = Show PTP port foreign masters.
HELP = Define interface list for the 'port' show commands. Default is show all interfaces.
HELP = Optional interface list.
HELP = Show PTP log mode.

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD = default : Option
BYWORD = current : Option
BYWORD = parent : Option
BYWORD = time-property : Option
BYWORD = clk : Option
BYWORD = ho : Option
BYWORD = uni : Option
BYWORD = master-table-unicast : Option
BYWORD = slave : Option
BYWORD = details : Option
BYWORD = port-state : Option
BYWORD = port-statistics : Option
BYWORD = port-ds : Option
BYWORD = wireless : Option
BYWORD = foreign-master-record : Option
BYWORD = interface : Option
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_show(session_id, clockinst, has_default, has_current, has_parent, has_time_property,
        has_filter, has_servo, has_clk, has_ho, has_uni, has_master_table_unicast,
        has_slave, has_details, has_port_state, has_port_statistics, has_port_ds, has_wireless, has_foreign_master_record,
        has_interface, v_port_type_list, has_log_mode));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_ZLS30387)

COMMAND = show ptp ms-pdv cgu <0-3> server <0-3> status

DOC_CMD_DESC    = Show the status for an MS-PDV server stream
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp ms-pdv cgu [0-3] server [0-3] status

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_0
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: ms-pdv
! 4: cgu
! 5: <0-3>
! 6: server
! 7: <0-3>
! 8: status

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = cgu_id
CMD_VAR =
CMD_VAR = server_id
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = ##ICLI_HELP_PTP
HELP = Show the configuration of the MS-PDV.
HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_ms_pdv_show_apr_server_status(session_id, cgu_id, server_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_ZLS30387)

COMMAND = show ptp ms-pdv apr cgu <0-3>

DOC_CMD_DESC    = Show the configuration of the MS-PDV APR
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp ms-pdv apr cgu 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_0
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: ms-pdv
! 4: apr
! 5: cgu
! 6: <0-3>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = cgu_id

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = ##ICLI_HELP_PTP
HELP = Show the configuration of the MS-PDV.
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_ms_pdv_show_apr_config(session_id, cgu_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp ext

DOC_CMD_DESC    = Show the 1PPS and External clock output configuration and vcxo frequency rate adjustment option.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp ext

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_0
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: ext

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = ##ICLI_HELP_PTP
HELP = Show the 1PPS and External clock output configuration  and VCXO frequency rate adjustment option.

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_ext_clock_mode_show(session_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp rs422 baudrate

DOC_CMD_DESC    = Show the RS422 port configuration
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp rs422 baudrate

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_0
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: rs422
! 4: baudrate

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option

HELP =
HELP =
HELP =
HELP = This command shows baud rate that has been configured for the RS422 port

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_rs422_clock_mode_show_baudrate(session_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp cal t-plane <port_type_id> { ext | int }

DOC_CMD_DESC    = Calibrate the timing plane of a port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: cal
! 3: t-plane
! 4: <port_type_id>
! 5: ext
! 6: int

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_port_type_id
CMD_VAR = has_ext
CMD_VAR = has_int

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = The port that shall be calibrated
HELP = Specifies that external loopback is to be used
HELP = Specifies that internal loopback is to be used

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = ext : Option
BYWORD = int : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cal_t_plane(session_id, v_port_type_id.begin_iport, has_ext, has_int));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp cal p2p <port_type_id> <port_type_id> <-100000-100000>

DOC_CMD_DESC    = Calibrate the port to port timing variation
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: cal
! 3: p2p
! 4: <port_type_id>
! 5: <port_type_id>
! 6: <-100000-100000>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = ref_port
CMD_VAR = other_port
CMD_VAR = cable_latency

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = The reference port
HELP = The port that shall be calibrated
HELP = Latency of the cable used for calibration

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = 
BYWORD = <CableLatency : -100000-100000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cal_p2p(session_id, ref_port.begin_iport, other_port.begin_iport, cable_latency));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp cal port <port_type_id> start [ synce ]

DOC_CMD_DESC    = Calibrate port to external reference using 1PPS
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: cal
! 3: port
! 4: <port_type_id>
! 5: start
! 6: synce

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_port_type_id
CMD_VAR = 
CMD_VAR = has_synce

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_runtime_synce_present

HELP =
HELP =
HELP =
HELP = The port that shall be calibrated
HELP = 
HELP = Whether DPLL frequency shall be controlled by SyncE

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = 
BYWORD = 

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cal_port_start(session_id, v_port_type_id.begin_iport, has_synce));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp cal port <port_type_id> offset <-100000-100000> cable-latency <-100000-100000>

DOC_CMD_DESC    = Calibrate offset of 1PPS output with port locked to external reference using 1PPS input
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: cal
! 3: port
! 4: <port_type_id>
! 5: offset
! 6: <-100000-100000>
! 7: cable-latency
! 8: <-100000-100000>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_port_type_id
CMD_VAR = 
CMD_VAR = pps_offset
CMD_VAR = 
CMD_VAR = cable_latency

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = The port that shall be calibrated
HELP =
HELP = 1PPS offset between master and slave (positive value means slave outputs pulse after master).
HELP = 
HELP = Latency of the cable used for calibration

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = 
BYWORD = <PpsOffset : -100000-100000>
BYWORD = 
BYWORD = <CableLatency : -100000-100000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cal_port_offset(session_id, v_port_type_id.begin_iport, pps_offset, cable_latency));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp cal port <port_type_id> [ mode { 10m-cu | 100m-cu | 1g-cu | 1g | 2g5 | 5g | 10g | 25g | 25g-rsfec | all } ] reset

DOC_CMD_DESC    = Reset the PTP port calibration of port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: cal
! 3: port
! 4: <port_type_id>
! 5: mode
! 6: 10m-cu
! 7: 100m-cu
! 8: 1g-cu
! 9: 1g
!10: 2g5
!11: 5g
!12: 10g
!13: 25g
!14: 25g-rsfec
!15: all
!16: reset

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_port_type_id
CMD_VAR =
CMD_VAR = has_10m_cu
CMD_VAR = has_100m_cu
CMD_VAR = has_1g_cu
CMD_VAR = has_1g
CMD_VAR = has_2g5
CMD_VAR = has_5g
CMD_VAR = has_10g
CMD_VAR = has_25g
CMD_VAR = has_25g_rsfec
CMD_VAR = has_all
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = The port for which the calibration shall be reset
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cal_port_reset(session_id, v_port_type_id.begin_iport, has_10m_cu, has_100m_cu, has_1g_cu, has_1g, has_2g5, has_5g, has_10g, has_25g, has_25g_rsfec, has_all));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp cal 1pps <-100000-100000> { rs422 | sma } [ reset ]

DOC_CMD_DESC    = Calibrate the 1pps latency through RS-422 port or SMA connectors.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: cal
! 3: 1pps
! 4: <-100000-100000>
! 5: rs422
! 6: sma
! 7: reset

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = cable_latency
CMD_VAR = has_rs422
CMD_VAR = has_sma
CMD_VAR = has_reset

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Latency of cable used for measurement.
HELP = RS-422 port is used for 1pps delay measurement.
HELP = SMA connectors are used for 1pps delay measurement.
HELP = Reset the earlier 1pps delay measurements.

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = rs422 : Option
BYWORD = sma : Option
BYWORD = reset : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    bool sma_pps = has_rs422 ? false : (has_sma ? true : true);
    ICLI_RC(ptp_icli_cal_1pps(session_id, cable_latency, sma_pps, has_reset));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp cal

DOC_CMD_DESC    = Show the PTP calibration.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp cal

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_0
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: cal

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = ##ICLI_HELP_PTP
HELP = Show the PTP calibration.

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_ptp_cal_show(session_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> local-clock { update | ratio <-10000000-10000000> }

DOC_CMD_DESC    = Update local clock current time, or set clock ratio.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: local-clock
! 4: update
! 5: ratio
! 6: <-10000000-10000000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_update
CMD_VAR = has_ratio
CMD_VAR = ratio

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP = Misc non persistent 1588 settings
HELP = PTP Clock instance [0-3]
HELP = Update local clock current time, or set clock ratio
HELP = The local clock is synchronized to the OS system clock
HELP = Set the local master clock frequency ratio.
HELP = Ratio in units of 0,1 PPB, (ratio > 0 => faster clock, ratio < 0 => slower clock).

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = update : Option
BYWORD = ratio : Option
BYWORD = <Ratio : -10000000-10000000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_local_clock_set(session_id, clockinst, has_update, has_ratio, ratio));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp <0-3> filter-type

DOC_CMD_DESC    = Show the filter type for a PTP instance
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp 0 filter-type

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: <0-3>
! 4: filter-type

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = PTP Clock instance [0-3]
HELP = Show PTP filter type

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_show_filter_type(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp <0-3> local-clock

DOC_CMD_DESC    = Show local clock current time.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp 0 local-clock

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: <0-3>
! 4: local-clock

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = PTP Clock instance [0-3]
HELP = Show local clock current time

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_local_clock_show(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> slave-cfg [ stable-offset <0-1000000> ] [ offset-ok <0-1000000> ] [ offset-fail <0-1000000> ]

DOC_CMD_DESC    = Set PTP clock Slave Configuration
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: slave-cfg
! 4: stable-offset
! 5: <0-1000000>
! 6: offset-ok
! 7: <0-1000000>
! 8: offset-fail
! 9: <0-1000000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_stable_offset
CMD_VAR = stable_offset
CMD_VAR = has_offset_ok
CMD_VAR = offset_ok
CMD_VAR = has_offset_fail
CMD_VAR = offset_fail

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP = ##ICLI_HELP_PTP
HELP = Clock instance [0-3]
HELP = Set PTP clock Slave Configuration
HELP = set the stable offset threshold
HELP = stable offset threshold in ns.
HELP = set the offset ok threshold
HELP = offset ok threshold in ns
HELP = set the offset fail threshold
HELP = offset fail threshold in ns

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = stable-offset : Option
BYWORD = <StableOffset : 0-1000000>
BYWORD = offset-ok : Option
BYWORD = <OffsetOk : 0-1000000>
BYWORD = offset-fail : Option
BYWORD = <OffsetFail : 0-1000000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_slave_cfg_set(session_id, clockinst, has_stable_offset, stable_offset, has_offset_ok, offset_ok, has_offset_fail, offset_fail));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp ref-clock { mhz125 | mhz156p25 | mhz250 }

DOC_CMD_DESC    = Set the 1588 reference clock frequency on the PCB107 board
DOC_CMD_DEFAULT = Frequency is 250 MHz
DOC_CMD_USAGE   = Used to test the 1588 accuracy at different frequencies
DOC_CMD_EXAMPLE = ptp ref-clock mhz125

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: ref-clock
! 3: mhz125
! 4: mhz156p25
! 5: mhz250

CMD_VAR =
CMD_VAR =
CMD_VAR = has_mhz125
CMD_VAR = has_mhz156p25
CMD_VAR = has_mhz250

RUNTIME =
RUNTIME = ptp_icli_ref_clk_option
RUNTIME = ptp_icli_ref_clk_option
RUNTIME = ptp_icli_ref_clk_option
RUNTIME = ptp_icli_ref_clk_option

HELP =
HELP = Set the 1588 reference clock frequency on the PCB110 board
HELP = Set the frequency to 125 MHz
HELP = Set the frequency to 156.25 MHz
HELP = Set the frequency to 250 MHz

BYWORD =
BYWORD =
BYWORD = mhz125 : Option
BYWORD = mhz156p25 : Option
BYWORD = mhz250 : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_ptp_ref_clock_set(session_id, has_mhz125, has_mhz156p25, has_mhz250));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp ref-clock

DOC_CMD_DESC    = Set the 1588 reference clock frequency to default on the PCB107 board
DOC_CMD_DEFAULT = Frequency is 250 MHz
DOC_CMD_USAGE   = Used to test the 1588 accuracy at different frequencies
DOC_CMD_EXAMPLE = no ptp ref-clock

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: ref-clock

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_ref_clk_option

HELP =
HELP =
HELP = Set the 1588 reference clock frequency to default on the PCB107 board

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_ptp_ref_clock_set(session_id, FALSE, FALSE, TRUE));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp system-time { get <0-3> | set }

DOC_CMD_DESC    = Enable synchronization between PTP and System time
DOC_CMD_DEFAULT = Disable synchronization between PTP and System time
DOC_CMD_USAGE   = Used to lock the ptp time to the System time (get) or vice versa (set)
DOC_CMD_EXAMPLE = ptp system-time get

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: system-time
! 3: get
! 4: <0-3>
! 5: set

CMD_VAR =
CMD_VAR =
CMD_VAR = has_get
CMD_VAR = clockinst
CMD_VAR = has_set

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Enable synchronization between PTP time and system time
HELP = Get (update) the PTP time from the system time
HELP =
HELP = Set (update) the system time from the PTP time

BYWORD =
BYWORD =
BYWORD = get : Option
BYWORD = <Clockinst : 0-3>
BYWORD = set : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_system_time_sync_set(session_id, has_get, has_set, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp system-time

DOC_CMD_DESC    = Disable synchronization between PTP and System time
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp system-time

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: system-time

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Disable synchronization between PTP and System time

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_system_time_sync_set(session_id, FALSE, FALSE, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp system-time

DOC_CMD_DESC    = Show the PTP <-> system time synchronization mode.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp system-time

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_0
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: system-time

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = ##ICLI_HELP_PTP
HELP = Show the PTP <-> system time synchronization mode.

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_system_time_sync_show(session_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp tc-internal [ mode <0-3> ]

DOC_CMD_DESC    = Define the internal mode used in TC's (0 = MODE_30BIT, 1 = MODE_32BIT, 2 = MODE_44BIT, 3 = MODE_48BIT)
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Modes 30BIT only can be used for BC and TC with both switch and phy timestamping.
DOC_CMD_EXAMPLE = ptp tc-internal mode 1

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: tc-internal
! 3: mode
! 4: <0-3>

CMD_VAR =
CMD_VAR =
CMD_VAR = has_mode
CMD_VAR = mode

RUNTIME =
RUNTIME = port_icli_runtime_tc_internal_range
RUNTIME =
RUNTIME = port_icli_runtime_tc_internal_range

HELP =
HELP = Define the internal mode used in transparent clocks
HELP = Set mode
HELP =

BYWORD =
BYWORD =
BYWORD = mode : Option
BYWORD = <Mode : 0-8>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_tc_internal_set(session_id, has_mode, mode));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp <0-3> slave-cfg

DOC_CMD_DESC    = Show PTP clock Slave Configuration
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: <0-3>
! 4: slave-cfg

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Show PTP clock Slave Configuration
HELP = Clock instance [0-3]
HELP = Show slave lock configuration

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_slave_cfg_show(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp <0-3> slave-table-unicast

DOC_CMD_DESC    = Show the Unicast slave table of the requested unicast masters
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp 0 slave-table-unicast

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: <0-3>
! 4: slave-table-unicast

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = ##ICLI_HELP_PTP
HELP = Clock instance: 0-3
HELP = Show the Unicast slave table of the requested unicast masters

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_slave_table_unicast_show(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =


COMMAND = debug ptp <0-3> unicast-cancel <0-99> { ann | sync | del }

DOC_CMD_DESC    = Send a Unicast calcel to a slave
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used for debugging
DOC_CMD_EXAMPLE = deb ptp unicast cancel 0 0 ann

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: unicast-cancel 
! 5: <0-99> 
! 6: ann
! 7: sync
! 8: del

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = slave_idx
CMD_VAR = has_ann
CMD_VAR = has_sync
CMD_VAR = has_del

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = ##ICLI_HELP_PTP
HELP = Clock instance: 0-3
HELP = Cancel Unicast 
HELP = Slave index
HELP = Cancel announce
HELP = Cancel Sync
HELP = Cancel Delay_Resp

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Clave_idx : 0-99>
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_deb_send_unicast_cancel(session_id, clockinst, slave_idx, has_ann, has_sync, has_del));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp <0-3> virtual-port

DOC_CMD_DESC    = Show the configuration of a PTP clocks virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = show ptp 0 virtual-port

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: <0-3>
! 4: virtual-port

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = ##ICLI_HELP_PTP
HELP = Clock instance: 0-3
HELP = Show the configuration of a PTP clocks virtual port

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_virtual_port_show(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = PTP_DISABLED

COMMAND = ptp <0-3> wireless mode interface <port_type_list>

DOC_CMD_DESC    = Enable wireless mode for one or more interfaces.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 wireless mode gi 1/1

NO_FORM_DOC_CMD_DESC    = Disable wireless mode for one or more interfaces.
NO_FORM_DOC_CMD_DEFAULT =
NO_FORM_DOC_CMD_USAGE   =
NO_FORM_DOC_CMD_EXAMPLE = no ptp 0 wireless mode gi 1/1

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: wireless
! 4: mode
! 5: interface
! 6: <port_type_list>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_port_type_list

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP = Misc non persistent 1588 settings.
HELP = Clock instance [0-3]
HELP = Enable wireless mode for one or more interfaces.
HELP = Enable wireless mode for an interface.
HELP = Interface
HELP = Interface id

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

NO_FORM_VARIABLE_BEGIN
NO_FORM_VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_wireless_mode_set(session_id, clockinst, TRUE, v_port_type_list));
CODE_END

NO_FORM_CODE_BEGIN
ICLI_RC(ptp_icli_wireless_mode_set(session_id, clockinst, FALSE, v_port_type_list));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = PTP_DISABLED

COMMAND = ptp <0-3> wireless pre-notification interface <port_type_list>

DOC_CMD_DESC    = Issue a pre notification that the wireless modem is going to change.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 wireless pre-notification interface gi 1/1

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: wireless
! 4: pre-notification
! 5: interface
! 6: <port_type_list>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_port_type_list

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Issue a pre notification that the wireless modem is going to change.
HELP =
HELP =

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_wireless_pre_notification(session_id, clockinst, v_port_type_list));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = PTP_DISABLED

COMMAND = ptp <0-3> wireless delay <0-1000000000> [ <0-1000000> ] interface <port_type_list>

DOC_CMD_DESC    = Set the wireless delay for one or more ports
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 wireless delay 1000000 interface gi 1/2

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: wireless
! 4: delay
! 5: <0-1000000000>
! 6: <0-1000000>
! 7: interface
! 8: <port_type_list>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = base_delay
CMD_VAR = incr_delay
CMD_VAR =
CMD_VAR = v_port_type_list

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP =
HELP = Base wireless transmission delay (in picoseconds)
HELP = Incremental wireless transmission delay pr. byte (in picoseconds)
HELP = Interface parameter
HELP =

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <BaseDelay : 0-1000000000>
BYWORD = <IncrDelay : 0-1000000>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_wireless_delay(session_id, clockinst, base_delay, incr_delay, v_port_type_list));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> mode { boundary | e2etransparent | p2ptransparent | master | slave | bcfrontend | aedgm | internal} [ onestep | twostep ] [ ethernet | ethernet-mixed | ip4multi | ip4mixed | ip4unicast | oam | onepps | ip6mixed | ethip4ip6-combo ] [ oneway | twoway ] [ id <clock_id> ] [ vid <vlan_id> [ <0-7> ] ] [ mep <1-100> ] [ profile { ieee1588 | g8265.1 | g8275.1 | g8275.2 | 802.1as | 802.1as-aed} ] [ clock-domain <0-6> ] [ dscp <0-63> ]

DOC_CMD_DESC    = Create a PTP clock instance
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 mode boundary onestep ethernet 10

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: mode
! 4: boundary
! 5: e2etransparent
! 6: p2ptransparent
! 7: master
! 8: slave
! 9: bcfrontend
! 10: aedGm
! 11: internal
! 12: onestep
! 13: twostep
! 14: ethernet
! 15: ethernet-mixed
! 16: ip4multi
! 17: ip4mixed
! 18: ip4unicast
! 19: oam
! 20: onepps
! 21: ip6mixed
! 22: ethip4ip6-combo
! 23: oneway
! 24: twoway
! 25: id
! 26: <clock_id>
! 27: vid
! 28: <vlan_id>
! 29: <0-7>
! 30: mep
! 31: <1-100>
! 32: profile
! 33: ieee1588
! 34: g8265.1
! 35: g8275.1
! 36: g8275.2
! 37: 802.1AS
! 38: 802.1AS-AED
! 39: clock-domain
! 40: <0-6>
! 41: dscp
! 42: <0-63>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_boundary
CMD_VAR = has_e2etransparent
CMD_VAR = has_p2ptransparent
CMD_VAR = has_master
CMD_VAR = has_slave
CMD_VAR = has_bcfrontend
CMD_VAR = has_aedgm
CMD_VAR = has_internal
CMD_VAR = has_onestep
CMD_VAR = has_twostep
CMD_VAR = has_ethernet
CMD_VAR = has_ethernet_mixed
CMD_VAR = has_ip4multi
CMD_VAR = has_ip4mixed
CMD_VAR = has_ip4unicast
CMD_VAR = has_oam
CMD_VAR = has_onepps
CMD_VAR = has_ip6mixed
CMD_VAR = has_any_ptp
CMD_VAR = has_oneway
CMD_VAR = has_twoway
CMD_VAR = has_id
CMD_VAR = v_clock_id
CMD_VAR = has_vid
CMD_VAR = vid
CMD_VAR = prio
CMD_VAR = has_mep
CMD_VAR = mep_id
CMD_VAR = has_profile
CMD_VAR = has_ieee1588
CMD_VAR = has_g8265_1
CMD_VAR = has_g8275_1
CMD_VAR = has_g8275_2
CMD_VAR = has_802_1as
CMD_VAR = has_802_1as_aed
CMD_VAR = has_clock_domain
CMD_VAR = clock_domain
CMD_VAR = has_dscp
CMD_VAR = dscp_id

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_runtime_telecom_profile_present
RUNTIME = ptp_icli_runtime_telecom_profile_present
RUNTIME = ptp_icli_runtime_telecom_profile_present
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Enable a PTP instance
HELP = Ordinary / Boundary clock
HELP = End to end transparent clock
HELP = Peer to peer transparent clock
HELP = Master only clock
HELP = Slave only clock
HELP = Boundary Clock front end
HELP = AED Grandmaster
HELP = Internal mode for synchronising clock domains internal to same device.
HELP = One-step mode
HELP = Two-step mode
HELP = Ethernet protocol encapsulation
HELP = Ethernet protocol encapsulation using mix of unicast and multicast
HELP = IPv4 multicast protocol encapsulation
HELP = IPv4 mixed multicast/unicast protocol encapsulation
HELP = IPv4 unicast protocol encapsulation
HELP = OAM encapsulation (only used in Serval based Distributed TC)
HELP = 1PPS master slave synchronization (only used with Gen2 1588 PHYs)
HELP = IPv6 mixed multicast/unicast protocol encapsulation
HELP = Encapsulation can be any one of Ethernet or IPv4 or IPv6 encapsulations
HELP = One-way slave mode (no Delay Request)
HELP = Two-way slave mode
HELP = define PTP clock instance identifier
HELP = PTP clock instance identifier (8 bytes)
HELP = define VLAN ID
HELP = VLAN id
HELP = The range of Priorities PTP can use in the tagged frames
HELP = Define MEP id used in OAM based PTP
HELP = MEP instance number used if the OAM protocol option is used (only relevant on Serval)
HELP = Indication that clock has an associated profile
HELP = IEEE 1588 profile
HELP = G8265.1 profile
HELP = G8275.1 profile
HELP = G8275.2 profile
HELP = 802.1AS profile
HELP = 802.1AS AED profile
HELP = Define clock domain used by this instance. Instances with different clock domain can have different time.
HELP = Clock domain used. The Clock domain may be hardware or software based. Jaguar2 has 3 hardware clock domains, other switches have 1 hardware clock domain.
HELP = Define DSCP field used in IPv4 encapsulation
HELP = DSCP field value used in IPv4 encapsulation

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = boundary : Option
BYWORD = e2etransparent : Option
BYWORD = p2ptransparent : Option
BYWORD = master : Option
BYWORD = slave : Option
BYWORD = frontend : Option
BYWORD = aedgm : Option
BYWORD = internal : Option
BYWORD = onestep : Option
BYWORD = twostep : Option
BYWORD = ethernet : Option
BYWORD = ethernet-mixed : Option
BYWORD = ip4multi : Option
BYWORD = ip4mixed : Option
BYWORD = ip4unicast : Option
BYWORD = oam : Option
BYWORD = onepps : Option
BYWORD = ip6mixed : Option
BYWORD = any-ptp : Option
BYWORD = oneway : Option
BYWORD = twoway : Option
BYWORD = id : Option
BYWORD =
BYWORD = vid : Option
BYWORD = <Vid : vlan_id>
BYWORD = <Prio : 0-7>
BYWORD = mep : Option
BYWORD = <MepId : 1-100>
BYWORD = profile : Option
BYWORD = ieee1588 : Option
BYWORD = g8265.1 : Option
BYWORD = g8275.1 : Option
BYWORD = g8275.2 : Option
BYWORD = 802.1AS : Option
BYWORD = 802.1AS-AED : Option
BYWORD = clock-domain : Option
BYWORD = <ClockDomain : 0-3>
BYWORD = dscp : Option
BYWORD = <DscpId : 0-63>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_mode(session_id, clockinst,
                has_boundary, has_e2etransparent, has_p2ptransparent, has_master, has_slave, has_bcfrontend, has_aedgm, has_internal,
                has_onestep, has_twostep,
                has_ethernet, has_ethernet_mixed, has_ip4multi, has_ip4mixed, has_ip4unicast, has_ip6mixed, has_oam, has_onepps, has_any_ptp,
                has_oneway, has_twoway,
                has_id, &v_clock_id,
                has_vid, vid, prio, has_mep, mep_id,
                has_profile, has_ieee1588, has_g8265_1, has_g8275_1, has_g8275_2, has_802_1as,
                has_802_1as_aed, has_clock_domain, clock_domain, has_dscp, dscp_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> mode { boundary | e2etransparent | p2ptransparent | master | slave | bcfrontend | aedgm | internal}

DOC_CMD_DESC    = Delete a PTP clock instance
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 mode boundary

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: mode
! 5: boundary
! 6: e2etransparent
! 7: p2ptransparent
! 8: master
! 9: slave
! 10: bcfrontend
! 11: aedgm
! 12: internal

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_boundary
CMD_VAR = has_e2etransparent
CMD_VAR = has_p2ptransparent
CMD_VAR = has_master
CMD_VAR = has_slave
CMD_VAR = has_bcfrontend
CMD_VAR = has_aedgm
CMD_VAR = has_internal

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Instance number: 0-3
HELP = Delete PTP clock instance
HELP = Delete if boundary clock
HELP = Delete if e2e TC
HELP = Delete if p2p TC
HELP = Delete if master only
HELP = Delete if slave only
HELP = Delete if Boundary clock front end
HELP = Delete if AED Grandmaster
HELP = Delete if internal mode

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = boundary : Option
BYWORD = e2etransparent : Option
BYWORD = p2ptransparent : Option
BYWORD = master : Option
BYWORD = slave : Option
BYWORD = frontend : Option
BYWORD = aedgm : Option
BYWORD = internal : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_no_mode(session_id, clockinst,
                has_boundary, has_e2etransparent, has_p2ptransparent, has_master, has_slave, has_bcfrontend, has_aedgm, has_internal));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> priority1 <0-255>

DOC_CMD_DESC    = Set Clock priority 1
DOC_CMD_DEFAULT = 128
DOC_CMD_USAGE   = Used to set Clock priority 1 for PTP BMC algorithm (0 is highest priority)
DOC_CMD_EXAMPLE = ptp 0 priority1 199

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: priority1
! 4: <0-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = priority1

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Clock priority 1 for PTP BMC algorithm (0 is highest priority)
HELP = PTP clock priority1: range = 0-255

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Priority1 : 0-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_priority1_set(session_id, clockinst, priority1));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> priority2 <0-255>

DOC_CMD_DESC    = Set Clock priority 2
DOC_CMD_DEFAULT = 128
DOC_CMD_USAGE   = Used to set Clock priority 2 for PTP BMC algorithm (0 is highest priority)
DOC_CMD_EXAMPLE = ptp 0 priority2 200

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: priority2
! 4: <0-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = priority2

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Clock priority 2 for PTP BMC algorithm (0 is highest priority)
HELP = PTP clock priority2: range = 0-255

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Priority2 : 0-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_priority2_set(session_id, clockinst, priority2));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> localpriority <1-255>

DOC_CMD_DESC    = Set Local priority for the clock
DOC_CMD_DEFAULT = 128
DOC_CMD_USAGE   = Used to set Local Clock priority for G8275.1 BMC algorithm (1 is highest priority)
DOC_CMD_EXAMPLE = ptp 0 localpriority 199

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: localpriority
! 4: <1-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = localpriority

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Local priority for  G8275.1 BMC algorithm (1 is highest priority)
HELP = PTP clock priority1: range = 1-255

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <LocalPriority : 1-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_local_priority_set(session_id, clockinst, localpriority));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> domain <0-127>

DOC_CMD_DESC    = Set domain number used in Announce messages
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 domain 2

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: domain
! 4: <0-127>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = domain

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = domain number used in Announce messages communication
HELP = PTP domain: range = 0-127

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Domain : 0-127>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_domain_set(session_id, clockinst, domain));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> path-trace-enable

DOC_CMD_DESC    = Enable path trace option
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 path-trace-enable

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: path-trace-enable

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Enable path trace option (i.e. Add Path Trace to Announce messages)

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_path_trace_set(session_id, clockinst, TRUE));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port class <0-255>

DOC_CMD_DESC    = Set class for PTP clocks virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set the class for the PTP clocks virtual port
DOC_CMD_EXAMPLE = ptp 0 virtual-port class 251

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: class
! 5: <0-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = ptp_class

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Set class for PTP clocks virtual port
HELP = PTP Class [0-255]

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Class : 0-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_class_set(session_id, clockinst, ptp_class));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port accuracy <0-255>

DOC_CMD_DESC    = Set accuracy for PTP clocks virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set the accuracy for the PTP clocks virtual port
DOC_CMD_EXAMPLE = ptp 0 virtual-port accuracy 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: accuracy
! 5: <0-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = ptp_accuracy

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Set accuracy for PTP clocks virtual port
HELP = PTP accuracy [0-255]

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Accuracy : 0-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_accuracy_set(session_id, clockinst, ptp_accuracy));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port variance <0-65535>

DOC_CMD_DESC    = Set variance for PTP clock virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set the variance for PTP clocks virtual port
DOC_CMD_EXAMPLE = ptp 0 virtual-port variance 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: variance
! 5: <0-65535>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = ptp_variance

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Set variance for PTP clock virtual port
HELP = PTP variance [0-65535]

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Variance : 0-65535>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_variance_set(session_id, clockinst, ptp_variance));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port local-priority <0-255>

DOC_CMD_DESC    = Set local priority for PTP clocks virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set the local priority for a PTP clocks virtual port
DOC_CMD_EXAMPLE = ptp 0 virtual-port local-priority 128

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: local-priority
! 5: <0-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = local_priority

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Set local priority for PTP clocks virtual port
HELP = Local priority [0-255]

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Local priority : 0-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_local_priority_set(session_id, clockinst, local_priority));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port priority1 <1-255>

DOC_CMD_DESC    = Set priority1 for PTP clocks virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set priority1 for a PTP clocks virtual port
DOC_CMD_EXAMPLE = ptp 0 virtual-port priority1 128

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: priority1
! 5: <1-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = priority1

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Set priority1 for PTP clocks virtual port.
HELP = 8275 profiles expect 128 for priority1.

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Priority : 1-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_priority1_set(session_id, clockinst, priority1));
CODE_END

CMD_END

!==============================================================================
CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port clock-identity <word23>

DOC_CMD_DESC    = Set clock identity for PTP clock virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set clock identity for a PTP clocks virtual port
DOC_CMD_EXAMPLE = ptp 0 virtual-port clock-identity

NO_FORM_DOC_CMD_DESC    = unset clock identty for PTP clock virtual port
NO_FORM_DOC_CMD_DEFAULT =
NO_FORM_DOC_CMD_USAGE   = unset clock identity for a PTP clocks virtual port
NO_FORM_DOC_CMD_EXAMPLE = no ptp 0 virtual-port clock-identity

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: clock-identity
! 5: <word23>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = clock_identity

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Set clock identity for PTP clock virtual port
HELP = clock identity (ex : 0a:0b:0c:00:01:02:03:04)

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_clock_identity_set(session_id, clockinst, clock_identity, TRUE));
CODE_END

NO_FORM_CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_clock_identity_set(session_id, clockinst, clock_identity, FALSE));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port steps-removed <0-255>

DOC_CMD_DESC    = Set stepsRemoved for PTP clocks virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set stepsRemoved for a PTP clocks virtual port
DOC_CMD_EXAMPLE = ptp 0 virtual-port steps-removed <0-255>

NO_FORM_DOC_CMD_DESC    = Disable stepsRemoved for PTP clocks virtual port
NO_FORM_DOC_CMD_DEFAULT =
NO_FORM_DOC_CMD_USAGE   = Unset stepsRemoved for a PTP clocks virtual port
NO_FORM_DOC_CMD_EXAMPLE = no ptp 0 virtual-port steps-removed <0-255>

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: steps-removed
! 5: <0-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = steps_removed

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Set stepsRemoved for PTP clocks virtual port
HELP = stepsRemoved

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

NO_FORM_VARIABLE_BEGIN
NO_FORM_VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_steps_removed_set(session_id, clockinst, steps_removed, TRUE));
CODE_END

NO_FORM_CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_steps_removed_set(session_id, clockinst, steps_removed, FALSE));
NO_FORM_CODE_END

CMD_END
!==============================================================================
CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port priority2 <0-255>

DOC_CMD_DESC    = Set priority2 for PTP clocks virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set priority2 for a PTP clocks virtual port
DOC_CMD_EXAMPLE = ptp 0 virtual-port priority2 128

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: priority2
! 5: <0-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = priority2

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Set priority2 for PTP clocks virtual port
HELP = Priority2

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Priority : 0-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_priority2_set(session_id, clockinst, priority2));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port mode { main-auto | main-man | sub [ pps-delay <1-999999999> ] | pps-in { 0 | 1 | 2 | 3 | 4 | 5 } [ pps-delay <1-999999999> ] | pps-out { 0 | 1 | 2 | 3 | 4 | 5 } | freq-out { 0 | 1 | 2 | 3 } <1-25000000> }

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: mode
! 5: main-auto
! 6: main-man
! 7: sub
! 8: pps-delay
! 9: <1-999999999>
! 10: pps-in
! 11: 0
! 12: 1
! 13: 2
! 14: 3
! 15: 4
! 16: 5
! 17: pps-delay
! 18: <1-999999999>
! 19: pps-out
! 20: 0
! 21: 1
! 22: 2
! 23: 3
! 24: 4
! 25: 5
! 26: freq-out
! 27: 0
! 28: 1
! 29: 2
! 30: 3
! 31: <1-25000000>

CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR =
CMD_VAR = has_main_auto
CMD_VAR = has_main_man
CMD_VAR = has_sub
CMD_VAR = has_pps_delay
CMD_VAR = v_1_to_999999999
CMD_VAR = has_pps_in
CMD_VAR = has_0
CMD_VAR = has_1
CMD_VAR = has_2
CMD_VAR = has_3
CMD_VAR = has_4
CMD_VAR = has_5
CMD_VAR = has_pps_delay_1
CMD_VAR = v_1_to_999999999_1
CMD_VAR = has_pps_out
CMD_VAR = has_0_1
CMD_VAR = has_1_1
CMD_VAR = has_2_1
CMD_VAR = has_3_1
CMD_VAR = has_4_1
CMD_VAR = has_5_1
CMD_VAR = has_freq_out
CMD_VAR = has_0_2
CMD_VAR = has_1_2
CMD_VAR = has_2_2
CMD_VAR = has_3_2
CMD_VAR = v_1_to_25000000

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_pps_inp_option
RUNTIME = ptp_inp_0_option
RUNTIME = ptp_inp_1_option
RUNTIME = ptp_inp_2_option
RUNTIME = ptp_inp_3_option
RUNTIME = ptp_inp_4_option
RUNTIME = ptp_inp_5_option
RUNTIME = ptp_pps_inp_option
RUNTIME = ptp_pps_inp_option
RUNTIME = ptp_pps_out_option
RUNTIME = ptp_out_0_option
RUNTIME = ptp_out_1_option
RUNTIME = ptp_out_2_option
RUNTIME = ptp_out_3_option
RUNTIME = ptp_out_4_option
RUNTIME = ptp_out_5_option
RUNTIME =
RUNTIME = ptp_out_0_option
RUNTIME = ptp_out_1_option
RUNTIME = ptp_out_2_option
RUNTIME = ptp_out_3_option
RUNTIME =

HELP =
HELP =
HELP =
HELP = Set Virtual port configuration
HELP = RS422 clock in main-auto mode (1PPS out, save time at L/S input)
HELP = RS422 clock in main-man mode (1PPS out, send configured PPS delay to sub module)
HELP = RS422 clock in sub mode (save time and load new time at L/S input)
HELP = Set the 1PPS latency
HELP = configured 1PPS latency
HELP = Use plain 1PPS input synchronization
HELP = PPS input pin to be used
HELP = PPS input pin to be used
HELP = PPS input pin to be used
HELP = PPS input pin to be used
HELP = PPS input pin to be used
HELP = PPS input pin to be used
HELP = Set the 1PPS latency
HELP = configured 1PPS latency
HELP = Generate 1pps output
HELP = PPS output pin to be used
HELP = PPS output pin to be used
HELP = PPS output pin to be used
HELP = PPS output pin to be used
HELP = PPS output pin to be used
HELP = PPS output pin to be used
HELP = Generate frequency output for synchronization
HELP = PPS output pin to be used
HELP = PPS output pin to be used
HELP = PPS output pin to be used
HELP = PPS output pin to be used
HELP = Output frequency

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = main-auto : Option
BYWORD = main-man : Option
BYWORD = sub : Option
BYWORD = pps-delay : Option
BYWORD =
BYWORD = pps-in : Option
BYWORD = 0 : Option
BYWORD = 1 : Option
BYWORD = 2 : Option
BYWORD = 3 : Option
BYWORD = 4 : Option
BYWORD = 5 : Option
BYWORD = pps-delay : Option
BYWORD =
BYWORD = pps-out : Option
BYWORD = 0 : Option
BYWORD = 1 : Option
BYWORD = 2 : Option
BYWORD = 3 : Option
BYWORD = 4 : Option
BYWORD = 5 : Option
BYWORD = freq-out : Option
BYWORD = 0 : Option
BYWORD = 1 : Option
BYWORD = 2 : Option
BYWORD = 3 : Option
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
int in_pin = has_0 ? 0: has_1 ? 1: has_2 ? 2: has_3 ? 3 : has_4 ? 4 : has_5 ? 5 : 5;
int out_pin = has_0_1 ? 0: has_1_1 ? 1: has_2_1 ? 2: has_3_1 ? 3 : has_4_1 ? 4 : has_5_1 ? 5 : 5;
int freq_pin = has_0_2 ? 0: has_1_2 ? 1: has_2_2 ? 2: has_3_2 ? 3 : 3;
BOOL has_pps_dly = has_pps_delay || has_pps_delay_1;
uint32_t pps_delay = has_pps_delay ? v_1_to_999999999 : has_pps_delay_1 ? v_1_to_999999999_1 : 0;
ICLI_RC(ptp_icli_virtual_port_mode_set(session_id, v_0_to_3, has_main_auto, has_main_man, has_sub, has_pps_dly, pps_delay, has_pps_in, in_pin, has_pps_out, out_pin, has_freq_out, freq_pin, v_1_to_25000000));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> virtual-port mode

DOC_CMD_DESC    = Set Virtual port configuration
DOC_CMD_DEFAULT = 
DOC_CMD_USAGE   = 
DOC_CMD_EXAMPLE = 

FUNC_NAME = 
FUNC_REUSE = 

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR = 

! no
CMD_VAR = 
RUNTIME = 
HELP    = 
BYWORD  = 

! ptp
CMD_VAR = 
RUNTIME = 
HELP    = 
BYWORD  = 

! <0-3>
CMD_VAR = inst
RUNTIME = 
HELP    = 
BYWORD  = 

! virtual-port
CMD_VAR = 
RUNTIME =
HELP    = 
BYWORD  = 

! mode
CMD_VAR = 
RUNTIME = 
HELP    = 
BYWORD  = 

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_mode_set(session_id, inst, FALSE, FALSE, FALSE, FALSE, 0, FALSE, 0, FALSE, 0, FALSE, 0, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = 

COMMAND = ptp <0-3> virtual-port tod { { ser [ proto { polyt | zda | rmc } ] } | { pim interface <port_type_id> } }

DOC_CMD_DESC    = Configure time of day option for virtual port
DOC_CMD_DEFAULT = 
DOC_CMD_USAGE   = 
DOC_CMD_EXAMPLE = 

FUNC_NAME = 
FUNC_REUSE = 

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = 

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR = 

! ptp
CMD_VAR = 
RUNTIME = 
HELP    = 
BYWORD  = 

! <0-3>
CMD_VAR = inst
RUNTIME = 
HELP    = PTP instance
BYWORD  = 

! virtual-port
CMD_VAR = 
RUNTIME =
HELP    = 
BYWORD  = 

! tod
CMD_VAR = 
RUNTIME = 
HELP    = Configure time of day option for virtual port
BYWORD  = 

! ser
CMD_VAR = has_ser
RUNTIME = ptp_icli_rs_422_option
HELP    = Use Serial interface to transfer 1PPS information
BYWORD  = ser : Option

! proto
CMD_VAR = has_proto
RUNTIME = ptp_icli_rs_422_option
HELP    = Specify the message format to use over the serial connection
BYWORD  = proto : Option

! polyt
CMD_VAR = has_polyt
RUNTIME = ptp_icli_rs_422_option
HELP    = Use the POLYT message format
BYWORD  = polyt : Option

! zda
CMD_VAR = has_zda
RUNTIME = ptp_icli_rs_422_option
HELP    = Use the NMEA ZDA message format
BYWORD  = zda : Option

! rmc
CMD_VAR = has_rmc
RUNTIME = ptp_icli_rs_422_option
HELP    = Use the NMEA RMC message format
BYWORD  = rmc : Option

! pim
CMD_VAR = has_pim
RUNTIME = 
HELP    = Use PIM protocol to transfer 1PPS information over a switch port
BYWORD  = pim : Option

! interface
CMD_VAR = 
RUNTIME = 
HELP    = Define interface used for PIM protocol
BYWORD  = 

! <port_type_id>
CMD_VAR = v_port_type_id
RUNTIME = 
HELP    = Define interface used for PIM protocol
BYWORD  = Switch interface port used for the PIM protocol in 'PIM' mode

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_tod_set(session_id, inst, has_ser, has_proto, has_polyt, has_zda, has_rmc, has_pim, v_port_type_id.begin_iport));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = 

COMMAND = no ptp <0-3> virtual-port tod

DOC_CMD_DESC    = Unconfigure time of day option for virtual port
DOC_CMD_DEFAULT = 
DOC_CMD_USAGE   = 
DOC_CMD_EXAMPLE = 

FUNC_NAME = 
FUNC_REUSE = 

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR = 

! no
CMD_VAR = 
RUNTIME = 
HELP    = 
BYWORD  = 

! ptp
CMD_VAR = 
RUNTIME = 
HELP    = 
BYWORD  = 

! <0-3>
CMD_VAR = inst
RUNTIME = 
HELP    = 
BYWORD  = 

! virtual-port
CMD_VAR = 
RUNTIME =
HELP    = 
BYWORD  = 

! tod
CMD_VAR = 
RUNTIME = 
HELP    = Disable time of day option for virtual port
BYWORD  = 

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_tod_set(session_id, inst, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port time-property [ utc-offset <-32768-32767> ] [ valid ] [ leap-59 | leap-61 ] [ time-traceable ] [ freq-traceable ] [ ptptimescale ] [ time-source <0-255> ] [ leap-pending <word10> { leap-59 | leap-61 } ]

DOC_CMD_DESC    = Set time properties
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 virtual-port time-property utc-offset 70 valid

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: time-property
! 5: utc-offset
! 6: <-32768-32767>
! 7: valid
! 8: leap-59
! 9: leap-61
! 10: time-traceable
! 11: freq-traceable
! 12: ptptimescale
! 13: time-source
! 14: <0-255>
! 15: leap-pending
! 16: <word10>
! 17: leap-59
! 18: leap-61

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = has_utc_offset
CMD_VAR = utc_offset
CMD_VAR = has_valid
CMD_VAR = has_leapminus_59
CMD_VAR = has_leapminus_61
CMD_VAR = has_time_traceable
CMD_VAR = has_freq_traceable
CMD_VAR = has_ptptimescale
CMD_VAR = has_time_source
CMD_VAR = time_source
CMD_VAR = has_leap_pending
CMD_VAR = date_string
CMD_VAR = has_leaptype_59
CMD_VAR = has_leaptype_61

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = configure virtual port
HELP = Set time properties
HELP = set UTC offset
HELP = UTC offset value
HELP = UTC offset is valid
HELP = leap59 in current day
HELP = leap61 in current day
HELP = timing is traceable
HELP = frequency is traceable
HELP = timing is a PTP time scale
HELP = set time source
HELP = time source: range 0-255
HELP = command includes a pending leap event
HELP = date of pending leap
HELP = pending leap is of type leap-59
HELP = pending leap is of type leap-61

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = utc-offset : Option
BYWORD =
BYWORD = valid : Option
BYWORD = leap-59 : Option
BYWORD = leap-61 : Option
BYWORD = time-traceable : Option
BYWORD = freq-traceable : Option
BYWORD = ptptimescale : Option
BYWORD = time-source : Option
BYWORD =
BYWORD = leap-pending : Option
BYWORD =
BYWORD = leap-59 : Option
BYWORD = leap-61 : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_time_property_set(session_id, clockinst, has_utc_offset, utc_offset, has_valid, has_leapminus_59, has_leapminus_61, has_time_traceable,
        has_freq_traceable, has_ptptimescale, has_time_source, time_source, has_leap_pending, date_string, has_leaptype_59, has_leaptype_61));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> virtual-port time-property

DOC_CMD_DESC    = unconfigure time properties of virtual port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: virtual-port
! 5: time-property

CMD_VAR =
CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP = unconfigure time properties of virtual port

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_virtual_port_default_time_property_set(session_id, v_0_to_3));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = 

COMMAND = ptp adj-method { ltc | single | independent | common | auto }

DOC_CMD_DESC    = Update the preferred clock rate adjustment option
DOC_CMD_DEFAULT = 
DOC_CMD_USAGE   = 
DOC_CMD_EXAMPLE = ptp ltc

FUNC_NAME = 
FUNC_REUSE = 

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = 

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR = 

! ptp
CMD_VAR = 
RUNTIME = 
HELP    = 
BYWORD  = 

! adj-method
CMD_VAR = 
RUNTIME = 
HELP    = Set preferred adjust method
BYWORD  = 

! ltc
CMD_VAR = has_ltc
RUNTIME = 
HELP    = Select Local Time Counter (LTC) frequency control
BYWORD  = ltc : Option

! single
CMD_VAR = has_single
RUNTIME = ptp_icli_runtime_has_single_dpll_mode_capability
HELP    = Select SyncE DPLL frequency control, if allowed by SyncE
BYWORD  = single : Option

! independent
CMD_VAR = has_independent
RUNTIME = ptp_icli_runtime_has_dual_dpll_mode_capability
HELP    = Select an oscillator independent of SyncE for frequency control, if supported by the hardware
BYWORD  = independent : Option

! common
CMD_VAR = has_common
RUNTIME = ptp_icli_runtime_has_single_dpll_mode_capability
HELP    = Select second DPLL for PTP, Both DPLL have the same (SyncE recovered) clock.
BYWORD  = common : Option

! auto
CMD_VAR = has_auto
RUNTIME = 
HELP    = AUTO Select clock control, based on PTP profile and available hardware resources
BYWORD  = auto : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_preferred_adj_set(session_id, has_ltc, has_single, has_independent, has_common, has_auto));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = 

COMMAND = no ptp adj-method

DOC_CMD_DESC    = Set default preferred clock rate adjustment option (AUTO)
DOC_CMD_DEFAULT = 
DOC_CMD_USAGE   = 
DOC_CMD_EXAMPLE = no ptp adj-method

FUNC_NAME = 
FUNC_REUSE = 

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR = 

! no
CMD_VAR = 
RUNTIME = 
HELP    = 
BYWORD  = 

! ptp
CMD_VAR = 
RUNTIME = 
HELP    = 
BYWORD  = 

! adj-method
CMD_VAR = 
RUNTIME = 
HELP    = Set preferred adjust method
BYWORD  = 

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_preferred_adj_set(session_id, FALSE, FALSE, FALSE, FALSE, TRUE));
CODE_END

CMD_END


!4.4 end
!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> virtual-port class

DOC_CMD_DESC    = Reset class for PTP clocks virtual port to default
DOC_CMD_DEFAULT = 251
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 virtual-port class

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: virtual-port
! 5: class

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_class_clear(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> virtual-port accuracy

DOC_CMD_DESC    = Reset accuracy for PTP clocks virtual port to default
DOC_CMD_DEFAULT = 254
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 virtual-port accuracy

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: virtual-port
! 5: accuracy

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Configure accuracy option for virtual port

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_accuracy_clear(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> virtual-port variance

DOC_CMD_DESC    = Reset variance for PTP clocks virtual port to default
DOC_CMD_DEFAULT = 65535
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 virtual-port variance

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: virtual-port
! 5: variance

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP =
HELP = reset variance for PTP clocks virtual port

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_variance_clear(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> virtual-port local-priority

DOC_CMD_DESC    = Reset local-priority for PTP clocks virtual port to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 virtual-port local-priority

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: virtual-port
! 5: local-priority

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP =
HELP = Reset local-priority for PTP clocks virtual port to default

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_local_priority_clear(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> virtual-port priority1

DOC_CMD_DESC    = Reset priority1 for PTP clocks virtual port to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 virtual-port priority1

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: virtual-port
! 5: priority1

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_priority1_clear(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> virtual-port priority2

DOC_CMD_DESC    = Reset priority2 for PTP clocks virtual port to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 virtual-port priority2

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: virtual-port
! 5: priority2

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_virtual_port_priority2_clear(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> virtual-port alarm enable

DOC_CMD_DESC    = Enable alarm on virtual port.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: virtual-port
! 4: alarm
! 5: enable

CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Alarm generation on virtual port master side to indicate status
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_virtual_port_alarm_conf_set(session_id, v_0_to_3, TRUE));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> virtual-port alarm

DOC_CMD_DESC    = Disable alarm on virtual port.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: virtual-port
! 5: alarm

CMD_VAR =
CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Alarm generation on virtual port master side to indicate status
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_virtual_port_alarm_conf_set(session_id, v_0_to_3, FALSE));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp <0-3> class <0-255>

DOC_CMD_DESC    = Set clocks PTP class
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set the Clocks PTP class
DOC_CMD_EXAMPLE = debug ptp 0 class 251

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: class
! 5: <0-255>

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = ptp_class

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP =
HELP = PTP Class [0-255]

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Class : 0-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_class_set(session_id, clockinst, ptp_class));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp <0-3> accuracy <0-255>

DOC_CMD_DESC    = Set clocks PTP accuracy
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set the Clocks PTP accuracy
DOC_CMD_EXAMPLE = debug ptp 0 accuracy 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: accuracy
! 5: <0-255>

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = ptp_accuracy

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = configure clocks PTP accuracy
HELP = PTP accuracy [0-255]

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Accuracy : 0-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_accuracy_set(session_id, clockinst, ptp_accuracy));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp <0-3> variance <0-65535>

DOC_CMD_DESC    = Set clocks PTP variance
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set the Clocks PTP variance
DOC_CMD_EXAMPLE = debug ptp 0 variance 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: variance
! 5: <0-65535>

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = ptp_variance

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = configure variance for PTP clocks virtual port
HELP = PTP variance [0-65535]

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Variance : 0-65535>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_variance_set(session_id, clockinst, ptp_variance));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug no ptp <0-3> class

DOC_CMD_DESC    = Reset clocks PTP class to default
DOC_CMD_DEFAULT = 251
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = debug no ptp 0 class

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: debug
! 2: no
! 3: ptp
! 4: <0-3>
! 5: class

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Clock instance [0-3]
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_class_clear(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug no ptp <0-3> accuracy

DOC_CMD_DESC    = Reset clocks PTP accuracy to default
DOC_CMD_DEFAULT = 254
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = debug no ptp 0 accuracy

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: debug
! 2: no
! 3: ptp
! 4: <0-3>
! 5: accuracy

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Reset clocks PTP accuracy to default

BYWORD =
BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_accuracy_clear(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug no ptp <0-3> variance

DOC_CMD_DESC    = Reset clocks PTP variance to default
DOC_CMD_DEFAULT = 65535
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = debug no ptp 0 variance

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: debug
! 2: no
! 3: ptp
! 4: <0-3>
! 5: variance

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Clock instance [0-3]
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_variance_clear(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> priority1

DOC_CMD_DESC    = Set Clock priority 1 to default
DOC_CMD_DEFAULT = 128
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 priority1

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: priority1

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Default Clock priority 1

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_priority1_set(session_id, clockinst, 128));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> priority2

DOC_CMD_DESC    = Set Clock priority 2 to default
DOC_CMD_DEFAULT = 128
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 priority2

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: priority2

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Default Clock priority 2

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_priority2_set(session_id, clockinst, 128));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> localpriority

DOC_CMD_DESC    = Set Clock localpriority  to default
DOC_CMD_DEFAULT = 128
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 localpriority

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: localpriority

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Default Clock local priority

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_local_priority_set(session_id, clockinst, 128));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> path-trace-enable

DOC_CMD_DESC    = Disable path trace option
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 path-trace-enable

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: path-trace-enable

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Disable path trace option (i.e. no Path Trace added to Announce messages)

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_path_trace_set(session_id, clockinst, FALSE));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> domain

DOC_CMD_DESC    = Set Clock domain to default
DOC_CMD_DEFAULT = 0
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 domain

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: domain

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Default Clock domain

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_domain_set(session_id, clockinst, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> time-property [ utc-offset <-32768-32767> ] [ valid ] [ leap-59 | leap-61 ] [ time-traceable ] [ freq-traceable ] [ ptptimescale ] [ time-source <0-255> ] [ leap-pending <word10> { leap-59 | leap-61 } ]

DOC_CMD_DESC    = Set PTP clock Timing properties Data set.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 time-property leap-59

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: time-property
! 4: utc-offset
! 5: <-32768-32767>
! 6: valid
! 7: leap-59
! 8: leap-61
! 9: time-traceable
! 10: freq-traceable
! 11: ptptimescale
! 12: time-source
! 13: <0-255>
! 14: leap-pending
! 15: <word10>
! 16: leap-59
! 17: leap-61

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_utc_offset
CMD_VAR = utc_offset
CMD_VAR = has_valid
CMD_VAR = has_leapminus_59
CMD_VAR = has_leapminus_61
CMD_VAR = has_time_traceable
CMD_VAR = has_freq_traceable
CMD_VAR = has_ptptimescale
CMD_VAR = has_time_source
CMD_VAR = time_source
CMD_VAR = has_leap_pending
CMD_VAR = date_string
CMD_VAR = has_leaptype_59
CMD_VAR = has_leaptype_61

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set time properties
HELP = set UTC offset
HELP = UTC offset value
HELP = UTC offset is valid
HELP = leap59 in current day
HELP = leap61 in current day
HELP = timing is traceable
HELP = frequency is traceable
HELP = timing is a PTP time scale
HELP = set time source
HELP = time source: range 0-255
HELP = command includes a pending leap event
HELP = date of pending leap
HELP = pending leap is of type leap-59
HELP = pending leap is of type leap-61

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = utc-offset : Option
BYWORD = <UtcOffset : -32768-32767>
BYWORD = valid : Option
BYWORD = leap-59 : Option
BYWORD = leap-61 : Option
BYWORD = time-traceable : Option
BYWORD = freq-traceable : Option
BYWORD = ptptimescale : Option
BYWORD = time-source : Option
BYWORD = <TimeSource : 0-255>
BYWORD =
BYWORD = <date: word10>
BYWORD = leap-59 : Option
BYWORD = leap-61 : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_time_property_set(session_id, clockinst, has_utc_offset, utc_offset, has_valid, has_leapminus_59, has_leapminus_61, has_time_traceable,
        has_freq_traceable, has_ptptimescale, has_time_source, time_source, has_leap_pending, date_string, has_leaptype_59, has_leaptype_61));

CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> filter-type { aci-default | aci-freq-xo | aci-phase-xo | aci-freq-tcxo | aci-phase-tcxo | aci-freq-ocxo-s3e | aci-phase-ocxo-s3e | aci-bc-partial-on-path-freq | aci-bc-partial-on-path-phase | aci-bc-full-on-path-freq | aci-bc-full-on-path-phase | aci-bc-full-on-path-phase-faster-lock-low-pkt-rate | aci-freq-accuracy-fdd | aci-freq-accuracy-xdsl | aci-elec-freq | aci-elec-phase | aci-phase-relaxed-c60w | aci-phase-relaxed-c150 | aci-phase-relaxed-c180 | aci-phase-relaxed-c240 | aci-phase-ocxo-s3e-r4-6-1 | aci-basic-phase | aci-basic-phase-low | basic }

DOC_CMD_DESC    = Set the type of the filter/servo combination used
DOC_CMD_DEFAULT = In the builds where the basic option is supported this is the default othwewise one of the advanced filter types is the default.
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 filter-type aci-bc-full-on-path-phase


FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: filter-type
! 4: aci-default
! 5: aci-freq-xo
! 6: aci-phase-xo
! 7: aci-freq-tcxo
! 8: aci-phase-tcxo
! 9: aci-freq-ocxo-s3e
! 10: aci-phase-ocxo-s3e
! 11: aci-bc-partial-on-path-freq
! 12: aci-bc-partial-on-path-phase
! 13: aci-bc-full-on-path-freq
! 14: aci-bc-full-on-path-phase
! 15: aci-bc-full-on-path-phase-faster-lock-low-pkt-rate
! 16: aci-freq-accuracy-fdd
! 17: aci-freq-accuracy-xdsl
! 18: aci-elec-freq
! 19: aci-elec-phase
! 20: aci-phase-relaxed-c60w
! 21: aci-phase-relaxed-c150
! 22: aci-phase-relaxed-c180
! 23: aci-phase-relaxed-c240
! 24: aci-phase-ocxo-s3e-r4-6-1
! 25: aci-basic-phase
! 26: aci-basic-phase-low
! 27: basic

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_aci_default
CMD_VAR = has_aci_freq_xo
CMD_VAR = has_aci_phase_xo
CMD_VAR = has_aci_freq_tcxo
CMD_VAR = has_aci_phase_tcxo
CMD_VAR = has_aci_freq_ocxo_s3e
CMD_VAR = has_aci_phase_ocxo_s3e
CMD_VAR = has_aci_bc_partial_on_path_freq
CMD_VAR = has_aci_bc_partial_on_path_phase
CMD_VAR = has_aci_bc_full_on_path_freq
CMD_VAR = has_aci_bc_full_on_path_phase
CMD_VAR = has_aci_bc_full_on_path_phase_faster_lock_low_pkt_rate
CMD_VAR = has_aci_freq_accuracy_fdd
CMD_VAR = has_aci_freq_accuracy_xdsl
CMD_VAR = has_aci_elec_freq
CMD_VAR = has_aci_elec_phase
CMD_VAR = has_aci_phase_relaxed_c60w
CMD_VAR = has_aci_phase_relaxed_c150
CMD_VAR = has_aci_phase_relaxed_c180
CMD_VAR = has_aci_phase_relaxed_c240
CMD_VAR = has_aci_phase_ocxo_s3e_r4_6_1
CMD_VAR = has_aci_basic_phase
CMD_VAR = has_aci_basic_phase_low
CMD_VAR = has_basic

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_or_zls30387_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_present
RUNTIME = ptp_icli_runtime_zls30380_or_zls30387_present
RUNTIME = ptp_icli_runtime_zls30380_or_zls30387_present
RUNTIME = ptp_icli_runtime_802_1as_present

HELP =
HELP =
HELP = Set the filter-type used by PTP
HELP = This is the PTP filter/servo implemented by Zarlink/Microsemi
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD = aci-default : Option
BYWORD = aci-freq-xo : Option
BYWORD = aci-phase-xo : Option
BYWORD = aci-freq-tcxo : Option
BYWORD = aci-phase-tcxo : Option
BYWORD = aci-freq-ocxo-s3e : Option
BYWORD = aci-phase-ocxo-s3e : Option
BYWORD = aci-bc-partial-on-path-freq : Option
BYWORD = aci-bc-partial-on-path-phase : Option
BYWORD = aci-bc-full-on-path-freq : Option
BYWORD = aci-bc-full-on-path-phase : Option
BYWORD = aci-bc-full-on-path-phase-faster-lock-low-pkt-rate : Option
BYWORD = aci-freq-accuracy-fdd : Option
BYWORD = aci-freq-accuracy-xdsl : Option
BYWORD = aci-elec-freq : Option
BYWORD = aci-elec-phase : Option
BYWORD = aci-phase-relaxed-c60w : Option
BYWORD = aci-phase-relaxed-c150 : Option
BYWORD = aci-phase-relaxed-c180 : Option
BYWORD = aci-phase-relaxed-c240 : Option
BYWORD = aci-phase-ocxo-s3e-r4-6-1 : Option
BYWORD = aci-basic-phase : Option
BYWORD = aci-basic-phase-low : Option
BYWORD = basic : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_filter_type_set(session_id, clockinst, has_aci_default, has_aci_freq_xo, has_aci_phase_xo,
                                 has_aci_freq_tcxo, has_aci_phase_tcxo, has_aci_freq_ocxo_s3e, has_aci_phase_ocxo_s3e,
                                 has_aci_bc_partial_on_path_freq, has_aci_bc_partial_on_path_phase,
                                 has_aci_bc_full_on_path_freq, has_aci_bc_full_on_path_phase, has_aci_bc_full_on_path_phase_faster_lock_low_pkt_rate, has_aci_freq_accuracy_fdd,
                                 has_aci_freq_accuracy_xdsl, has_aci_elec_freq, has_aci_elec_phase,
                                 has_aci_phase_relaxed_c60w, has_aci_phase_relaxed_c150,
                                 has_aci_phase_relaxed_c180, has_aci_phase_relaxed_c240,
                                 has_aci_phase_ocxo_s3e_r4_6_1, has_aci_basic_phase,
                                 has_aci_basic_phase_low, has_basic));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = clear ptp <0-3> servo

NETWORK_CLOCK_CLR_HELP = Clear (i.e. reset) the servo of a PTP instance.
DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

PRIVILEGE = ICLI_PRIVILEGE_15

CMD_MODE = ICLI_CMD_MODE_EXEC

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

! 1: clear
! 2: ptp
! 3: <0-3>
! 4: servo

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

HELP =
HELP =
HELP =
HELP =

CODE_BEGIN
    ICLI_RC_CHECK(ptp_icli_servo_clear(session_id, clockinst), "%% Failed to set network-clock configuration.\n");
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = 

COMMAND = ptp <0-3> servo displaystates

DOC_CMD_DESC    = Enable log of path delay, offset and servo internal data
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 servo displaystates

NO_FORM_DOC_CMD_DESC    =
NO_FORM_DOC_CMD_DEFAULT =
NO_FORM_DOC_CMD_USAGE   =
NO_FORM_DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: servo
! 4: displaystates

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set Servo parameters
HELP = Enable logging of servo parameters on the console

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

NO_FORM_VARIABLE_BEGIN
NO_FORM_VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_servo_displaystate_set(session_id, clockinst, TRUE));
CODE_END

NO_FORM_CODE_BEGIN
ICLI_RC(ptp_icli_servo_displaystate_set(session_id, clockinst, FALSE));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> servo ap <1-1000>

DOC_CMD_DESC    = Set PID servo P parameter.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 servo ap 80

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: servo
! 4: ap
! 5: <1-1000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = ap

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP =
HELP = Set 'P' parameter in the Basic servo
HELP = [1..1000] 'P' component in PID servo regulator

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Ap : 1-1000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_servo_ap_set(session_id, clockinst, TRUE, ap));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> servo ap

DOC_CMD_DESC    = Disable PID servo P part
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 ap

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: servo
! 5: ap

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP =
HELP = Disable 'P' parameter in the Basic servo

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_servo_ap_set(session_id, clockinst, FALSE, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> servo ai <1-10000>

DOC_CMD_DESC    = Set PID servo I parameter.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 servo ai 40

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: servo
! 4: ai
! 5: <1-10000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = ai

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP =
HELP = Set 'I' parameter in the Basic servo
HELP = [1..10000] 'I' component in PID servo regulator.

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Ai : 1-10000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_servo_ai_set(session_id, clockinst, TRUE, ai));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> servo ai

DOC_CMD_DESC    = Disable PID servo I part
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 ai

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: servo
! 5: ai

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP =
HELP = Disable 'P' parameter in the Basic servo

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_servo_ai_set(session_id, clockinst, FALSE, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> servo ad <1-10000>

DOC_CMD_DESC    = Set PID servo D parameter.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 servo ad 160

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: servo
! 4: ad
! 5: <1-10000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = ad

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =  Clock instance 0-3
HELP =
HELP = Set 'D' parameter in the Basic servo
HELP = [1..10000] 'D' component in PID servo regulator

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Ad : 1-10000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_servo_ad_set(session_id, clockinst, TRUE, ad));
CODE_END

CMD_END
!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> servo ad

DOC_CMD_DESC    = Disable PID servo D part
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 servo ad

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: servo
! 5: ad

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP =
HELP = Disable 'P' parameter in the Basic servo

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_servo_ad_set(session_id, clockinst, FALSE, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> servo gain <1-10000>

DOC_CMD_DESC    = Set PID servo gain parameter.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 servo gain 16

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: servo
! 4: gain
! 5: <1-10000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = gain

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =  Clock instance 0-3
HELP =
HELP = Set Basic servo gain parameter.
HELP = [1..10000] gain component in PID servo regulator

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Gain : 1-10000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_servo_gain_set(session_id, clockinst, gain));
CODE_END

CMD_END
!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> servo gain

DOC_CMD_DESC    = Set PID servo gain parameter to default (=1).
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 servo gain

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: servo
! 5: gain

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP =
HELP = Set Basic servo gain parameter to default (=1).

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_servo_gain_set(session_id, clockinst, 1));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> filter [ delay <0-6> ] [ period <1-10000> ] [ dist <0-10> ]

DOC_CMD_DESC    = Set PTP clock filter data of Basic servo
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 filter delay 3

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: filter
! 4: delay
! 5: <0-6>
! 6: period
! 7: <1-10000>
! 8: dist
! 9: <1-10>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_delay
CMD_VAR = delay
CMD_VAR = has_period
CMD_VAR = period
CMD_VAR = has_dist
CMD_VAR = dist

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set filter parameters of Basic servo
HELP = Set delay filter parameter of Basic servo
HELP = Log2 of timeconstant in delay lowpass filter, valid range: 1-6, Setting the value to 0 means use the same filter function as for the offset measurement, in this case the delay filter uses the 'period' and 'dist' parameters.
HELP = Set offset filter period parameter of Basic servo
HELP = Measurement period in number of sync events, valid range: 1-10000
HELP = Set offset filter dist parameter
HELP = Distance between servo update n number of measurement periods, valid range: 0-10, 0 => 0,1 Hz lowpass filtering, 1 => averaging over period, >1 => 'min' offset filtering.

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = delay : Option
BYWORD = <Delay : 0-6>
BYWORD = period : Option
BYWORD = <Period : 1-10000>
BYWORD = dist : Option
BYWORD = <Dist : 1-10>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_filter_set(session_id, clockinst, has_delay, delay, has_period, period, has_dist, dist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> clk sync <1-1000> ap <1-40>

DOC_CMD_DESC    = Set PTP slave clock options, to 'clock is SyncE locked'
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 clk sync 200 ap 100

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: clk
! 4: sync
! 5: <1-1000>
! 6: ap
! 7: <1-40>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = threshold
CMD_VAR =
CMD_VAR = ap

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set PTP slave clock options
HELP = Set PTP slave clock options to 'clock is SyncE locked'
HELP = [1..1000] Threshold in ns for offset from master defines when the offset increment/decrement mode is entered
HELP = Set the adjustment factor
HELP = [1..40]  The offset increment/decrement adjustment factor

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Threshold : 1-1000>
BYWORD =
BYWORD = <Ap : 1-40>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_clock_servo_options_set(session_id, clockinst, TRUE, threshold, ap));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> clk

DOC_CMD_DESC    = Set PTP slave clock options, to freerunning
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 clk

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: clk

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Set PTP slave clock options to free running

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_clock_servo_options_set(session_id, clockinst, FALSE, 0, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> ho [ filter <10-86400> ] [ adj-threshold <1-3000> ]

DOC_CMD_DESC    = Set PTP Servo holdover parameters
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 ho filter 150 500

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: ho
! 4: filter
! 5: <10-86400>
! 6: adj-threshold
! 7: <1-3000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_filter
CMD_VAR = ho_filter
CMD_VAR = has_adj_threshold
CMD_VAR = adj_threshold

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set PTP Servo holdover parameters
HELP = Set stabilization period
HELP = [10..86400] Holdover filter and stabilization period
HELP = Set adjustment threshold
HELP = [1..3000]  max frequency adjustment change within the holdover stabilization period (in units of 0.1 ppb)

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = filter : Option
BYWORD = <HoFilter : 10-86400>
BYWORD = adj-threshold : Option
BYWORD = <AdjThreshold : 1-3000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_clock_slave_holdover_set(session_id, clockinst, has_filter, ho_filter, has_adj_threshold, adj_threshold));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> ho

DOC_CMD_DESC    = Reset PTP Servo holdover parameters to default values
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 ho

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: ho

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Reset PTP Servo holdover parameters to default values

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_clock_slave_holdover_set(session_id, clockinst, TRUE, 60, TRUE, 300));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> uni <0-4> [ duration <10-1000> ] <ipv4_ucast>

DOC_CMD_DESC    = Set a Unicast Slave configuration entry
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 uni 0 192.168.1.10

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: uni
! 4: <0-4>
! 5: duration
! 6: <10-1000>
! 7: <ipv4_ucast>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = idx
CMD_VAR = has_duration
CMD_VAR = duration
CMD_VAR = ip

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set a Unicast Slave configuration entry
HELP = [0..4] Index in the slave table
HELP = Set the Duration parameter
HELP = Duration [10..1000]. Number of seconds for which the Announce/Sync messages are requested
HELP = IPv4 address of requested master clock

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Index : 0-4>
BYWORD = duration : Option
BYWORD = <Duration : 10-1000>
BYWORD = <Ip : ipv4_ucast>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_clock_unicast_conf_set(session_id, clockinst, idx, has_duration, duration, ip));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> uni <0-4>

DOC_CMD_DESC    = Clear a Unicast Slave configuration entry
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 uni 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: uni
! 5: <0-4>

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = idx

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Clear a Unicast Slave configuration entry
HELP = [0..4] Index in the slave table

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Index : 0-4>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_clock_unicast_conf_set(session_id, clockinst, idx, FALSE, 0, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp ext [ output ] [ ext <1-25000000> ] [ ltc | single | independent | common | auto ] [ clk-domain <0-2> ]

DOC_CMD_DESC    = Update the 1PPS and External clock output configuration and the preferred clock rate adjustment option
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp ext output ltc

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: ext
! 3: output
! 4: ext
! 5: <1-25000000>
! 6: ltc
! 7: single
! 8: independent
! 9: common
! 10: auto
! 11: clk-domain
! 12: <0-2>

CMD_VAR =
CMD_VAR =
CMD_VAR = has_output
CMD_VAR = has_ext
CMD_VAR = clockfreq
CMD_VAR = has_ltc
CMD_VAR = has_single
CMD_VAR = has_independent
CMD_VAR = has_common
CMD_VAR = has_auto
CMD_VAR = has_domain
CMD_VAR = v_0_to_2

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_runtime_has_single_dpll_mode_capability
RUNTIME = ptp_icli_runtime_has_dual_dpll_mode_capability
RUNTIME = ptp_icli_runtime_has_single_dpll_mode_capability
RUNTIME =
RUNTIME = ptp_icli_runtime_has_multiple_clock_domains
RUNTIME = ptp_icli_runtime_has_multiple_clock_domains

HELP =
HELP = Update the 1PPS and External clock output configuration and VCXO frequency rate adjustment option
HELP = Enable 1PPS output
HELP = Enable external clock frequency output
HELP = [1..25.000.000] External Clock output frequency in Hz
HELP = Select Local Time Counter (LTC) frequency control
HELP = Select SyncE DPLL frequency control, if allowed by SyncE
HELP = Select an oscillator independent of SyncE for frequency control, if supported by the hardware
HELP = Select second DPLL for PTP, Both DPLL have the same (SyncE recovered) clock.
HELP = AUTO Select clock control, based on PTP profile and available hardware resources
HELP = clock domain in chip supporting multiple clock domains.
HELP = clock domain number.

BYWORD =
BYWORD =
BYWORD = output : Option
BYWORD = ext : Option
BYWORD = <Clockfreq : 1-25000000>
BYWORD = ltc : Option
BYWORD = single : Option
BYWORD = independent : Option
BYWORD = common : Option
BYWORD = auto : Option
BYWORD = domain : Option
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_ext_clock_set(session_id, has_output, has_ext, clockfreq,
                        has_ltc, has_single, has_independent, has_common, has_auto,
                        has_domain ? v_0_to_2 : 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp ext

DOC_CMD_DESC    = Set the 1PPS and External clock output configuration and vcxo frequency rate adjustment option to default values
DOC_CMD_DEFAULT = 1PPS disabled, clockout disabled, vcxo disabled.
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp ext

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: ext

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Set the 1PPS and External clock output configuration and VCXO frequency rate adjustment option to default values

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_ext_clock_set(session_id, FALSE, FALSE, 1, FALSE, FALSE, FALSE, FALSE, FALSE, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp rs422 baudrate <9600,19200,38400,115200> [ parity { none | even | odd } ] [ wordlength <5-8> ] [ stopbits <1-2> ] [ flowctrl { none | rtscts } ]

DOC_CMD_DESC    = Set the RS422 baudrate, parity, wordlength etc.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = This command configures the RS422 I/F. When only the baudrate is specified, the other parameters defaults to N81 and no flow control.
DOC_CMD_EXAMPLE = ptp rs422 baudrate 38400

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: rs422
! 3: baudrate
! 4: <9600,19200,38400,115200>
! 5: parity
! 6: none
! 7: even
! 8: odd
! 9: wordlength
! 10: <5-8>
! 11: stopbits
! 12: <1,2>
! 13: flowctrl
! 14: none
! 15: rtscts

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = baudrate
CMD_VAR = has_parity
CMD_VAR = has_none
CMD_VAR = has_even
CMD_VAR = has_odd
CMD_VAR = has_wordlength
CMD_VAR = wordlength
CMD_VAR = has_stopbits
CMD_VAR = stopbits
CMD_VAR = has_flowctrl
CMD_VAR = has_noflow
CMD_VAR = has_rtscts

RUNTIME =
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option
RUNTIME = ptp_icli_rs_422_option

HELP =
HELP = Set the RS422 baud rate, parity, word length etc.
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD = <baudrate : 9600,19200,38400,115200>
BYWORD =
BYWORD = none : Option
BYWORD = even : Option
BYWORD = odd : Option
BYWORD =
BYWORD = <wordlength : 5-8>
BYWORD =
BYWORD = <stopbits : 1-2>
BYWORD =
BYWORD = none : Option
BYWORD = rtscts : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_rs422_set_baudrate(session_id, baudrate, has_parity, has_none, has_even, has_odd, has_wordlength, wordlength, has_stopbits, stopbits, has_flowctrl, has_noflow, has_rtscts));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp ho-spec [ cat1 <0-999999999> ] [ cat2 <0-999999999> ] [ cat3 <0-999999999> ]

DOC_CMD_DESC    = Set the Holdover specification for G8275 PTP clocks
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = The three parameters define the time (in sec) that the clock stays within the holdover specification for Category 1,2, and 3 clocks.
DOC_CMD_EXAMPLE = ptp ho-spec cat1 10

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: ho-spec
! 3: cat1
! 4: <0-999999999>
! 5: cat2
! 6: <0-999999999>
! 7: cat3
! 8: <0-999999999>

CMD_VAR =
CMD_VAR =
CMD_VAR = has_cat1
CMD_VAR = cat1
CMD_VAR = has_cat2
CMD_VAR = cat2
CMD_VAR = has_cat3
CMD_VAR = cat3

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =


HELP =
HELP = Set the Holdover specification for G8275 PTP clocks
HELP = Define cat1 time
HELP = cat1 time in sec
HELP = Define cat2 time
HELP = cat2 time in sec
HELP = Define cat3 time
HELP = cat3 time in sec

BYWORD =
BYWORD =
BYWORD = cat1 : Option
BYWORD = <Cat1 : 0-999999999>
BYWORD = cat2 : Option
BYWORD = <Cat2 : 0-999999999>
BYWORD = cat3 : Option
BYWORD = <Cat3 : 0-999999999>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_ho_spec_set(session_id, has_cat1, cat1, has_cat2, cat2, has_cat3, cat3));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp ho-spec

DOC_CMD_DESC    = Clear the Holdover specification for G8275 PTP clocks
DOC_CMD_DEFAULT = 0 sec
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp ho-spec

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: ho-spec

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clear the Holdover specification for G8275 PTP clocks

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_ho_spec_set(session_id, true, 0, true, 0, true, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> log <1-8> [log-to-file] [control] [max-time <0-4000>]

DOC_CMD_DESC    = Set the PTP debug mode
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 log 1
FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: log
! 4: <1-8>
! 5: log-to-file
! 6: control
! 7: max-time
! 8: <0-4000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = debug_mode
CMD_VAR = has_log_to_file
CMD_VAR = has_control
CMD_VAR = has_max_time
CMD_VAR = max_time

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set the PTP debug mode
HELP = 1-8 Debug log mode, 1 => log offset from master, 2 => log sync packets, 3 => log Delay_req, 4 => log both, 5-8 modes are similar to 1-4 modes with addition of sub nano second logging
HELP = Direct log output to a file instead of console (Use http://<IP address of target>/logs/ptp_log_<0-3>.tpk to fetch the log afterwards).
HELP = Keep on controlling the clock while logging packet contents.
HELP = Set the max time that the log is running, default is 4.000 sec.
HELP = Max log time, unit is seconds.

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <DebugMode : 1-8>
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_log_mode_set(session_id, clockinst, debug_mode, has_log_to_file, has_control, has_max_time, max_time));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> log

DOC_CMD_DESC    = Set the PTP debug mode to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp log

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: log

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Disable the PTP debug logging

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_log_mode_set(session_id, clockinst, 0, FALSE, FALSE, FALSE, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> log delete

DOC_CMD_DESC    = Deletes the log for a PTP instance. If logging is active it is stopped first.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp log delete

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: log
! 4: delete

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP =
HELP =

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_log_delete(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> afi-announce


DOC_CMD_DESC    = Enable PTP Announce automatic frame injection
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 afi-announce

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: afi-announce

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_sync_ann_auto_option

HELP =
HELP = Clock instance 0-3
HELP = Enable PTP Announce automatic frame injection

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_afi_mode_set(session_id, clockinst, true, true));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> afi-announce

DOC_CMD_DESC    = Disable PTP Announce automatic frame injection
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp <0-3> afi-announce

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: afi-announce

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_sync_ann_auto_option

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Disable PTP Announce automatic frame injection

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_afi_mode_set(session_id, clockinst, true, false));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> afi-sync

DOC_CMD_DESC    = Enable PTP Sync automatic frame injection
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 afi-sync

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: afi-sync

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_sync_ann_auto_option

HELP =
HELP = Clock instance 0-3
HELP = Enable PTP Sync automatic frame injection

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_afi_mode_set(session_id, clockinst, false, true));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> afi-sync

DOC_CMD_DESC    = Disable PTP Sync automatic frame injection
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp <0-3> afi-sync

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: no
! 2: ptp
! 3: <0-3>
! 4: afi-sync

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_sync_ann_auto_option

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Disable PTP Sync automatic frame injection

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_afi_mode_set(session_id, clockinst, false, false));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> [ internal ]

DOC_CMD_DESC    = Enable PTP for the interface(s), optionally set as an internal interface
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: internal

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR = has_internal

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP = ##ICLI_HELP_PTP
HELP = [0-3] Clock instance
HELP = enable as an internal interface

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD = internal : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_state_set(session_id, clockinst, TRUE, has_internal, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3>

DOC_CMD_DESC    = Disable PTP for the interface(s)
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =

HELP =
HELP = Disable PTP for the interface(s)
HELP = [0-3] Clock instance

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_state_set(session_id, clockinst, FALSE, FALSE, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> announce { [ interval { <-3-4> | stop | default } ] [ timeout <1-10> ] }*1

DOC_CMD_DESC    = Set announce interval and timeout
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 announce interval 1 timeout 3

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: announce
! 4: interval
! 5: <-3-4>
! 6: stop
! 7: default
! 8: timeout
! 9: <1-10>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_interval
CMD_VAR = interval
CMD_VAR = has_stop
CMD_VAR = has_default
CMD_VAR = has_timeout
CMD_VAR = timeout

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set announce interval and timeout
HELP = Set announce interval
HELP = LogAnnounceInterval
HELP = 802.1AS profile only: instructs the peer to stop sending announce messages
HELP = 802.1AS profile only: instructs the peer to use the initial value
HELP = Set Announce timeout
HELP = Announce timeout (* announce interval)

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = interval : Option
BYWORD = <Interval : -3-4>
BYWORD = stop : Option
BYWORD = default : Option
BYWORD = timeout : Option
BYWORD = <Timeout : 1-10>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_announce_set(session_id, clockinst, has_interval, interval, has_stop, has_default, has_timeout, timeout, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> sync-interval { <int> | stop | default }

DOC_CMD_DESC    = Set sync interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 sync-interval -4

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: sync-interval
! 4: <int>
! 5: stop
! 6: default

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = interval
CMD_VAR = has_stop
CMD_VAR = has_default

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_log_sync_interval_check
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME = ptp_icli_runtime_802_1as_present

HELP =
HELP = Clock instance 0-3
HELP = Set sync interval
HELP = LogSyncInterval
HELP = 802.1AS profile only: instructs the peer to stop sending sync messages
HELP = 802.1AS profile only: instructs the peer to use the initial value

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = stop : Option
BYWORD = default : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_sync_interval_set(session_id, clockinst, interval, has_stop, has_default, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> delay-mechanism { e2e | p2p | common-p2p }

DOC_CMD_DESC    = Set delay machanism
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 delay-mechanism e2e

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: delay-mechanism
! 4: e2e
! 5: p2p
! 6: common-p2p

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_e2e
CMD_VAR = has_p2p
CMD_VAR = has_common_p2p

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_runtime_802_1as_present

HELP =
HELP = Clock instance 0-3
HELP = Set delay mechanism
HELP = End to End Delay mechanism
HELP = Peer to Peer Delay mechanism
HELP = Common Peer to Peer Delay mechanism

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = e2e : Option
BYWORD = p2p : Option
BYWORD = common-p2p : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_delay_mechanism_set(session_id, clockinst, has_e2e, has_p2p, has_common_p2p, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> mgtSettableLogSyncInterval { <int> | stop | default }

DOC_CMD_DESC    = Set sync interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 mgtSettableLogSyncInterval -4

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: sync-interval
! 4: <int>
! 5: stop
! 6: default

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = interval
CMD_VAR = has_stop
CMD_VAR = has_default

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_log_sync_interval_check
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME = ptp_icli_runtime_802_1as_present


HELP =
HELP = Clock instance 0-3
HELP = Set sync interval
HELP = LogSyncInterval <-7 to 4>
HELP = 802.1AS profile only: stop sending sync messages
HELP = 802.1AS profile only: use the initial sync interval value

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = stop : Option
BYWORD = default : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_mgtSettable_sync_interval_set(session_id, clockinst, interval, has_stop, has_default, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> usemgtSettableLogSyncInterval  <0-1>

DOC_CMD_DESC    = Set OPTION to configure sync interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 usemgtSettableLogSyncInterval 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: option to configure sync-interval
! 4: <0-1>


CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = usemgtSettableLogSyncInterval


RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =


HELP =
HELP = Clock instance 0-3
HELP = option to set sync interval
HELP = setting 1 alters sync-interval to configured mgtSettableLogSyncInterval  


BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <usemgtSettableLogSyncInterval : 0-1>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_usemgtSettable_sync_interval_set(session_id, clockinst, usemgtSettableLogSyncInterval, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> usemgtSettableLogPdelayReqInterval  <0-1>

DOC_CMD_DESC    = Set OPTION to configure peer delay req interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 usemgtSettableLogPdelayReqInterval 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: option to configure peer delay req interval
! 4: <0-1>


CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = usemgtSettableLogPdelayReqInterval


RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =



HELP =
HELP = Clock instance 0-3
HELP = option to set peer delay request  interval
HELP = setting 1 alters peer-delay request interval to configured mgtSettableLogSyncInterval


BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <usemgtSettableLogPdelayReqInterval : 0-1>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_usemgtSettable_pdelay_req_interval_set(session_id, clockinst, usemgtSettableLogPdelayReqInterval, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> mgtSettableLogAnnounceInterval { <-3-4> | stop | default }

DOC_CMD_DESC    = Set announce interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 mgtSettableLogAnnounceInterval -4

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: announce-interval
! 4: <int>
! 5: stop
! 6: default

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = interval
CMD_VAR = has_stop
CMD_VAR = has_default

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME = 
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME = ptp_icli_runtime_802_1as_present

HELP =
HELP = Clock instance 0-3
HELP = Set announce interval
HELP = LogAnnounceInterval
HELP = 802.1AS profile only: stop sending announce messages
HELP = 802.1AS profile only: use the initial announce interval value

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Interval : -3-4>
BYWORD = stop : Option
BYWORD = default : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_mgtSettable_announce_interval_set(session_id, clockinst, interval, has_stop, has_default, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> usemgtSettableLogAnnounceInterval  <0-1>

DOC_CMD_DESC    = Set OPTION to configure announce interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 usemgtSettableLogAnnounceInterval 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: option to configure announce-interval
! 4: <0-1>


CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = usemgtSettableLogAnnounceInterval


RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =


HELP =
HELP = Clock instance 0-3
HELP = option to set announce interval
HELP = setting 1 alters announce-interval to configured mgtSettableLogAnnounceInterval


BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <usemgtSettableLogAnnounceInterval : 0-1>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_usemgtSettable_announce_interval_set(session_id, clockinst, usemgtSettableLogAnnounceInterval, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> delay-req interval { <-7-5> | stop | default }

DOC_CMD_DESC    = Set pdelay req interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 delay-req interval -3

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: delay-req
! 4: interval
! 5: <-7-5>
! 6: stop
! 7: default

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = interval
CMD_VAR = has_stop
CMD_VAR = has_default

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME = ptp_icli_runtime_802_1as_present

HELP =
HELP = Clock instance 0-3
HELP = Set pdelay req interval
HELP = Define pdelay req interval
HELP = logMinPdelayReqInterval
HELP = 802.1AS profile only: instructs the peer to stop sending PDelay_Req messages
HELP = 802.1AS profile only: instructs the peer to use the initial value

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = <Interval : -7-5>
BYWORD = stop : Option
BYWORD = default : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_min_pdelay_interval_set(session_id, clockinst, interval, has_stop, has_default, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> mgtSettableLogPdelayReqInterval { <-7-5> | stop | default }

DOC_CMD_DESC    = Set pdelay req interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 delay-req interval -3

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: delay-req
! 4: interval
! 5: <-7-5>
! 6: stop
! 7: default

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = interval
CMD_VAR = has_stop
CMD_VAR = has_default

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME = ptp_icli_runtime_802_1as_present

HELP =
HELP = Clock instance 0-3
HELP = Set management settable pdelay req interval
HELP = logMinPdelayReqInterval
HELP = 802.1AS profile only: stop sending PDelay_Req messages
HELP = 802.1AS profile only: use the initial pdelay req interval value

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <Interval : -7-5>
BYWORD = stop : Option
BYWORD = default : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_mgtsettable_pdelay_interval_set(session_id, clockinst, interval, has_stop, has_default, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> delay-asymmetry <-100000-100000>

DOC_CMD_DESC    = Set path delay asymmetry
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 delay_asymmetry -1234

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: delay-asymmetry
! 4: <-100000-100000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = delay_asymmetry

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set path delay asymmetry
HELP = Delay asymmetry in ns.

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <DelayAsymmetry : -100000-100000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_delay_asymmetry_set(session_id, clockinst, delay_asymmetry, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> ingress-latency <-100000-100000>

DOC_CMD_DESC    = Set port ingress latency
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 ingress-latency 272

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: ingress-latency
! 4: <-100000-100000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = ingress_latency

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set port ingress latency
HELP = Ingress latency in ns

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <IngressLatency : -100000-100000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_ingress_latency_set(session_id, clockinst, ingress_latency, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> egress-latency <-100000-100000>

DOC_CMD_DESC    = Set port egress latency
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 egress-latency 123

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: egress-latency
! 4: <-100000-100000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = egress_latency

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = Set port egress latency
HELP = Egress latency in ns

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <EgressLatency : -100000-100000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_egress_latency_set(session_id, clockinst, egress_latency, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> localpriority <1-255>

DOC_CMD_DESC    = Set Local priority for the port
DOC_CMD_DEFAULT = 128
DOC_CMD_USAGE   = Used to set Local Port priority for G8275.1 BMC algorithm (1 is highest priority)
DOC_CMD_EXAMPLE = ptp 0 localpriority 199

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: localpriority
! 4: <1-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = localpriority

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Local priority pr port for G8275.1 BMC algorithm (1 is highest priority)
HELP = PTP clock priority1: range = 1-255

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <LocalPriority : 1-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_local_priority_set(session_id, clockinst, localpriority, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> master-only

DOC_CMD_DESC    = Set 'masterOnly' attribute for the port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set 'masterOnly' attribute for ieee 1588, G8275.1, G8275.2 BMC algorithm
DOC_CMD_EXAMPLE = ptp 0 master-only

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: not_slave

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = set 'master-only' attribute for ieee 1588, G8275.1, G8275.2 BMC algorithm

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_master_only_set(session_id, clockinst, true, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> mcast-dest { default | link-local}

DOC_CMD_DESC    = Set multicast destination address type for the port
DOC_CMD_DEFAULT = default
DOC_CMD_USAGE   = Used to set multicast destination address type for the port for G8275.1 Profile
DOC_CMD_EXAMPLE = ptp 0 mcast-dest link-local

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: mcast-dest
! 4: default
! 5: link-local

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_default
CMD_VAR = has_link_local


RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Set multicast destination address type for the port
HELP = Default destination address
HELP = Link-local destination address

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = default : Option
BYWORD = link-local : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_mcast_dest_adr_set(session_id, clockinst, has_default, has_link_local, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> two-step [true]

DOC_CMD_DESC    = Set the two-step override value for the port to true
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set two-step override value for the port to true
DOC_CMD_EXAMPLE = ptp 0 two-step true

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: two_step
! 4: true

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Set the two-step override value for the port to true
HELP =

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_two_step_set(session_id, clockinst, TRUE, TRUE, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> two-step false

DOC_CMD_DESC    = Set the two-step override value for the port to false
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to set two-step override value for the port to false
DOC_CMD_EXAMPLE = ptp 0 two-step false

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: two_step
! 4: false

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Set the two-step override value for the port to false
HELP =

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_two_step_set(session_id, clockinst, TRUE, FALSE, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> 802.1as {2020 | 2011}

DOC_CMD_DESC    = Set the 802.1as version for the port
DOC_CMD_DEFAULT = 2020
DOC_CMD_USAGE   = Used to change the 802.1as version between 2020 and 2011
DOC_CMD_EXAMPLE = ptp 0 802.1as 2020

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: 802.1as
! 4: 2020
! 5: 2011

CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR = has_2020
CMD_VAR = has_2011

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Setting 802.1as to version 802.1as-2020, else use 802.1as-2011.
HELP =
HELP =

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = 2020 : Option
BYWORD = 2011 : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    if (has_2020) {
        ICLI_RC(ptp_icli_port_as2020_set(session_id, v_0_to_3, plist, TRUE));
    } else if (has_2011) {
        ICLI_RC(ptp_icli_port_as2020_set(session_id, v_0_to_3, plist, FALSE));
    }
CODE_END

NO_FORM_CODE_BEGIN
    if (has_2020) {
        ICLI_RC(ptp_icli_port_as2020_set(session_id, v_0_to_3, plist, FALSE));
    } else if (has_2011) {
        ICLI_RC(ptp_icli_port_as2020_set(session_id, v_0_to_3, plist, TRUE));
    }
NO_FORM_CODE_END
CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)


COMMAND = ptp <0-3> delay-thresh <0-4000000000>

DOC_CMD_DESC    = Set the G802.1AS meanLinkDelayThresh value for the port to a number of nanoseconds
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set the G802.1AS meanLinkDelayThresh value for the port to a number of nanoseconds
DOC_CMD_EXAMPLE = ptp 0 delay-thresh 800

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: delay-thresh
! 4: <0-4000000000>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = delay_thresh

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Set the meanLinkDelayThresh value for the port to a number of nanoseconds
HELP = The meanLinkDelayThresh value in nanoseconds.

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <meanLinkDelayThresh : 0-4000000000>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_delay_thresh_set(session_id, clockinst, TRUE, delay_thresh, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> delay-thresh

DOC_CMD_DESC    = Set the G802.1AS meanLinkDelayThresh value for the port to the default value
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set the G802.1AS meanLinkDelayThresh value for the port to the default value
DOC_CMD_EXAMPLE = no ptp 0 delay-thresh

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: delay-thresh

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Set the meanLinkDelayThresh value for the port to the default value

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_delay_thresh_set(session_id, clockinst, FALSE, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> sync-rx-to <1-255>

DOC_CMD_DESC    = Set the G802.1AS syncReceiptTimeout value for the port to a number of syncTimeInterval's
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set the G802.1AS syncReceiptTimeout value for the port to a number of syncTimeInterval's
DOC_CMD_EXAMPLE = ptp 0 sync-rx-to 5

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: sync-rx-to
! 4: <1-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = sync_rx_to

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Set the syncReceiptTimeout value for the port
HELP = The syncReceiptTimeout value for the port in number of syncTimeInterval's.

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <syncReceiptTimeout : 1-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_sync_rx_to_set(session_id, clockinst, TRUE, sync_rx_to, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> statistics [ clear ]

DOC_CMD_DESC    = Get and optionally clear the G802.1AS statiscics counters for the port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Get and optionally clear the G802.1AS statiscics counters for the port
DOC_CMD_EXAMPLE = ptp 0 statistics clear

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: statistics
! 4: clear

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_clear

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Get G802.1AS statistics counters for the port
HELP = Clear G802.1AS statistics counters for the port

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_statistics_clear(session_id, clockinst, has_clear, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> sync-rx-to

DOC_CMD_DESC    = Set the G802.1AS syncReceiptTimeout value for the port to the default value
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set the G802.1AS syncReceiptTimeout value for the port to the default value
DOC_CMD_EXAMPLE = no ptp 0 sync-rx-to

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: sync-rx-to

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Set the syncReceiptTimeout value for the port to the default value

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_sync_rx_to_set(session_id, clockinst, FALSE, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> allow-lost-resp <0-10>

DOC_CMD_DESC    = Set the G802.1AS allowedLostResponses value for the port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set the G802.1AS allowedLostResponses value for the port
DOC_CMD_EXAMPLE = ptp 0 allow-lost-resp 5

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: allow-lost-resp
! 4: <0-10>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = allow_lost_resp

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Set the allowedLostResponses value for the port
HELP = The allowedLostResponses value for the port

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <allowedLostResponses : 0-10>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_allow_lost_resp_set(session_id, clockinst, TRUE, allow_lost_resp, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> allow-lost-resp

DOC_CMD_DESC    = Set the G802.1AS allowedLostResponses value for the port to the default value
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set the G802.1AS allowedLostResponses value for the port to the default value
DOC_CMD_EXAMPLE = no ptp 0 allow-lost-resp

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: allow-lost-resp

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Set the allowedLostResponses value for the port to the default value

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_allow_lost_resp_set(session_id, clockinst, FALSE, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> allow-faults <1-255>

DOC_CMD_DESC    = Set the 802.1AS allowedFaults value for the port
DOC_CMD_DEFAULT = Default value of allowedFaults is 9
DOC_CMD_USAGE   = Set the 802.1AS allowedFaults value for the port
DOC_CMD_EXAMPLE = ptp 0 allow-faults 20

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: allow-faults
! 4: <1-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = allow_faults

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Set the allowedFaults value for the port
HELP = The allowedFaults value for the port

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <allowedFaults : 1-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_port_allow_faults_set(session_id, clockinst, TRUE, allow_faults, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> allow-faults

DOC_CMD_DESC    = Set the 802.1AS allowedFaults value for the port to default value
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set the 802.1AS allowedFaults value for the port to default value
DOC_CMD_EXAMPLE = no ptp 0 allow-faults

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: allow-faults

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Set the allowedFaults value for the port to the default value

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_port_allow_faults_set(session_id, clockinst, FALSE, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> aed-port-role {master | slave}

DOC_CMD_DESC    = Set the AED role for the port
DOC_CMD_DEFAULT = AED-Master
DOC_CMD_USAGE   = Used to change between AED master and slave port roles
DOC_CMD_EXAMPLE = ptp 0 aed-port-role master

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: aed-port-role
! 4: master
! 5: slave

CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR = has_master
CMD_VAR = has_slave

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Setting the AED port role to master or slave
HELP =
HELP =

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = master : Option
BYWORD = slave : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    if (has_master) {
        ICLI_RC(ptp_icli_port_aed_port_set(session_id, v_0_to_3, plist, 0));
    } else if (has_slave) {
        ICLI_RC(ptp_icli_port_aed_port_set(session_id, v_0_to_3, plist, 1));
    }
CODE_END

NO_FORM_CODE_BEGIN
    if (has_master) {
        ICLI_RC(ptp_icli_port_aed_port_set(session_id, v_0_to_3, plist, 1));
    } else if (has_slave) {
        ICLI_RC(ptp_icli_port_aed_port_set(session_id, v_0_to_3, plist, 0));
    }
NO_FORM_CODE_END
CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> aed-intervals [ operPdelayReq <0-3> ] [ initSync <-5--3> ] [ operSync <-3-0> ]

DOC_CMD_DESC    = Set the aed PdelayReq or sync intervals
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 aed-intervals operPdelayReq 3

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: aed-intervals
! 4: operPdelayReq
! 5: <0-3>
! 6: initSync
! 7: <-5--3>
! 8: operSync
! 9: <-3-0>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_oper_pdelay
CMD_VAR = oper_pdelay_val
CMD_VAR = has_init_sync
CMD_VAR = init_sync_val
CMD_VAR = has_oper_sync
CMD_VAR = oper_sync_val

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance 0-3
HELP = configure aed intervals
HELP = set operational pdelay_req
HELP = operational pdelay_req value
HELP = set initial sync
HELP = initial sync value
HELP = set operational sync
HELP = operational sync value

BYWORD =
BYWORD =
BYWORD =
BYWORD = operPdelayReq : Option
BYWORD =
BYWORD = initSync : Option
BYWORD =
BYWORD = operSync : Option
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_aed_interval_set(session_id, clockinst, has_oper_pdelay, oper_pdelay_val, has_init_sync, init_sync_val, has_oper_sync, oper_sync_val, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> announce { interval | timeout }

DOC_CMD_DESC    = Set announce interval and timeout to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 announce interval

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: announce
! 5: interval
! 6: timeout

CMD_VAR =
RUNTIME = icli_is_switchport_runtime
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = has_interval
CMD_VAR = has_timeout

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Set announce interval or timeout to default
HELP = Set announce interval to default
HELP = Set announce timeout to default

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = interval : Option
BYWORD = timeout : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_announce_set(session_id, clockinst, has_interval, 0, FALSE, TRUE, has_timeout, 3, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> sync-interval

DOC_CMD_DESC    = Set sync interval to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 sync-interval

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: sync-interval

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Set sync interval to default

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_sync_interval_set(session_id, clockinst, 0, FALSE, TRUE, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> delay-mechanism

DOC_CMD_DESC    = Set delay machanism to default
DOC_CMD_DEFAULT = e2e
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 delay-mechanism

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: delay-mechanism

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Set delay mechanism to default (e2e)

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_delay_mechanism_set(session_id, clockinst, TRUE, FALSE, FALSE, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> delay-req interval

DOC_CMD_DESC    = Set pdelay req interval to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 delay-req interval

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: delay-req
! 5: interval

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Set pdelay req interval to default
HELP = Set pdelay req interval to default

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_min_pdelay_interval_set(session_id, clockinst, 2, FALSE, TRUE, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> delay-asymmetry

DOC_CMD_DESC    = Set path delay asymmetry to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 delay-asymmetry

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: delay-asymmetry

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Set path delay asymmetry to default (0)

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_delay_asymmetry_set(session_id, clockinst, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> ingress-latency

DOC_CMD_DESC    = Set port ingress latency to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 ingress-latency

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: ingress-latency

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Set port ingress latency to default

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_ingress_latency_set(session_id, clockinst, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> egress-latency

DOC_CMD_DESC    = Set port egress latency to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 egress-latency

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: egress-latency

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Set port egress latency to default

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_egress_latency_set(session_id, clockinst, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> localpriority

DOC_CMD_DESC    = Set default Local priority for the port
DOC_CMD_DEFAULT = 128
DOC_CMD_USAGE   = Used to set default Local Port priority for G8275.1 BMC algorithm (128)
DOC_CMD_EXAMPLE = no ptp 0 localpriority

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: localpriority

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Default Local priority pr port for G8275.1 BMC algorithm (128)

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_local_priority_set(session_id, clockinst, 128, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> master-only

DOC_CMD_DESC    = Clear 'master-only' attribute for the port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to clear 'masterOnly' attribute for G8275.1 BMC algorithm
DOC_CMD_EXAMPLE = no ptp 0 master-only

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: not_slave

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = set 'masterOnly' attribute for G8275.1 BMC algorithm

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_master_only_set(session_id, clockinst, false, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> two-step

DOC_CMD_DESC    = Clear the two-step override value for the port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Used to clear two-step override value for the port
DOC_CMD_EXAMPLE = no ptp 0 two-step

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: two_step

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP =

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_two_step_set(session_id, clockinst, FALSE, FALSE, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = PTP_DISABLED

COMMAND = ptp pps-sync { main-auto | main-man | sub } [ pps-phase <0-999999999> ] [ cable-asy <-10000-10000> ] [ ser-man | ser-auto ]

DOC_CMD_DESC    = Set 1pps synchronization mode for the Gen2 1588 phy's
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp pps-sync main-auto cable-asy -10 ser-man

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: pps-sync
! 3: main-auto
! 4: main-man
! 5: sub
! 6: pps-phase
! 7: <0-999999999>
! 8: cable-asy
! 9: <-10000-10000>
! 10: ser-man
! 11: ser-auto

CMD_VAR =
CMD_VAR =
CMD_VAR = has_main_auto
CMD_VAR = has_main_man
CMD_VAR = has_sub
CMD_VAR = has_pps_phase
CMD_VAR = pps_phase
CMD_VAR = has_cable_asy
CMD_VAR = cable_asy
CMD_VAR = has_ser_man
CMD_VAR = has_ser_auto

RUNTIME = icli_is_switchport_runtime
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability

HELP =
HELP = Set 1pps synchronization mode for the Gen2 1588 PHYs
HELP = Set the mode to main with automatic cable delay measurement
HELP = Set the mode to main with manual cable delay configuration
HELP = Set the mode to sub (slave)
HELP = Set cable delay manually (used in main-man mode)
HELP = The cable delay in ns.
HELP = Set cable asymmetry (used in main-auto mode)
HELP = The cable asymmetry in ns. (Tms = mean delay + asy, Tsm = mean delay - asy)
HELP = Set Serial TOD manual mode (i.e. both phase and frequency adjustment is done in SW)
HELP = Set Serial TOD auto mode (i.e. the phase adjustment is done in hardware, and frequency adjustment is done in software)

BYWORD =
BYWORD =
BYWORD = main-auto : Option
BYWORD = main-man : Option
BYWORD = sub : Option
BYWORD = pps-phase : Option
BYWORD = <PpsPhase : 0-999999999>
BYWORD = cable-asy : Option
BYWORD = <CableAsy : -10000-10000>
BYWORD = ser-man : Option
BYWORD = ser-auto : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_1pps_mode_set(session_id, has_main_auto, has_main_man, has_sub, has_pps_phase, pps_phase,
                            has_cable_asy, cable_asy, has_ser_man, has_ser_auto, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = PTP_DISABLED

COMMAND = no ptp pps-sync

DOC_CMD_DESC    = Disable 1pps synchronization mode for the Gen2 1588 phy
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp pps-sync

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: pps-sync

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability

HELP =
HELP =
HELP = Disable 1pps synchronization mode for the Gen2 1588 PHY

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_1pps_mode_set(session_id, FALSE, FALSE, FALSE, FALSE, 0,
                            FALSE, 0, FALSE, FALSE, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = PTP_DISABLED

COMMAND = ptp pps-delay { { auto master-port interface <port_type_id> } | { man cable-delay <0-999999999> } }

DOC_CMD_DESC    = Set the internal 1PPS cable delay, with optional closed loop delay measurement
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp pps-delay auto master-port interface gigabit 1/1

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: pps-delay
! 3: auto
! 4: master-port
! 5: interface
! 6: <port_type_id>
! 7: man
! 8: cable-delay
! 9: <0-999999999>

CMD_VAR =
CMD_VAR =
CMD_VAR = has_auto
CMD_VAR =
CMD_VAR =
CMD_VAR = v_port_type_id
CMD_VAR = has_man
CMD_VAR =
CMD_VAR = cable_delay

RUNTIME = icli_is_switchport_runtime
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability

HELP =
HELP = Set the internal 1PPS cable delay, with optional closed loop delay measurement.
HELP = Enable automatic closed loop cable delay measurement.
HELP = Define the port that is 1pps master.
HELP = Define master port interface
HELP = Define interface type and instance
HELP = Set manually cable delay.
HELP = Define the cable delay.
HELP = The Cable delay in ns.

BYWORD =
BYWORD =
BYWORD = auto : Option
BYWORD =
BYWORD =
BYWORD =
BYWORD = man : Option
BYWORD =
BYWORD = <CableDelay : 0-999999999>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_1pps_delay_set(session_id, has_auto, v_port_type_id.begin_iport, has_man, cable_delay, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = PTP_DISABLED

COMMAND = no ptp pps-delay

DOC_CMD_DESC    = Set default internal 1PPS cable delay
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: pps-delay

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability
RUNTIME = ptp_icli_runtime_has_phy_timestamp_capability

HELP =
HELP =
HELP = Set default internal 1PPS cable delay

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_1pps_delay_set(session_id, FALSE, 0, FALSE, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp pim statistics [ <port_type_list> ] [ clear ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! debug
CMD_VAR =
RUNTIME =
HELP    = ##ICLI_HELP_DEBUG
BYWORD  =

! ptp
CMD_VAR =
RUNTIME =
HELP    = ##ICLI_HELP_PTP
BYWORD  =

! pim
CMD_VAR =
RUNTIME =
HELP    = Show or clear the PIM protocol statistics
BYWORD  =

! statistics
CMD_VAR =
RUNTIME =
HELP    =
BYWORD  =

! <port_type_list>
CMD_VAR = v_port_type_list
RUNTIME =
HELP    = Interface id
BYWORD  =

! clear
CMD_VAR = has_clear
RUNTIME =
HELP    = Clear statistics
BYWORD  = clear : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_pim_statistics(session_id, v_port_type_list, has_clear));

CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp egress-latency [ clear ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! debug
CMD_VAR =
RUNTIME =
HELP    = ##ICLI_HELP_DEBUG
BYWORD  =

! ptp
CMD_VAR =
RUNTIME =
HELP    = ##ICLI_HELP_PTP
BYWORD  =

! egress-latency
CMD_VAR =
RUNTIME =
HELP    = One-step egress latency observed in systems where the timestamping is done in SW
BYWORD  =

! clear
CMD_VAR = has_clear
RUNTIME =
HELP    = Clear the latency observations
BYWORD  = clear : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_egress_latency_statistics(session_id, has_clear));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp <0-3> slave statistics [ enable | disable | clear ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! debug
CMD_VAR =
RUNTIME =
HELP    = ##ICLI_HELP_DEBUG
BYWORD  =

! ptp
CMD_VAR =
RUNTIME =
HELP    = ##ICLI_HELP_PTP
BYWORD  =

! <0-3>
CMD_VAR = clockinst
RUNTIME =
HELP    = PTP Clock instance [0-3]
BYWORD  = <Clockinst : 0-3>

! slave
CMD_VAR =
RUNTIME =
HELP    = Enable, Disable or Show the PTP slave statistics
BYWORD  =

! statistics
CMD_VAR =
RUNTIME =
HELP    =
BYWORD  =

! enable
CMD_VAR = has_enable
RUNTIME =
HELP    = Enable statistics collection
BYWORD  =  enable : Option

! disable
CMD_VAR = has_disable
RUNTIME =
HELP    = Disable statistics collection
BYWORD  =  disable : Option

! clear
CMD_VAR = has_clear
RUNTIME =
HELP    = Clear statistics
BYWORD  = clear : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_slave_statistics(session_id, clockinst, has_enable, has_disable, has_clear));

CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp pps-tod statistics [ clear ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! debug
CMD_VAR =
RUNTIME =
HELP    = ##ICLI_HELP_DEBUG
BYWORD  =

! ptp
CMD_VAR =
RUNTIME =
HELP    = ##ICLI_HELP_PTP
BYWORD  =

! pps-tod
CMD_VAR =
RUNTIME =
HELP    = Show/Clear the PTP one PPS statistics
BYWORD  =

! statistics
CMD_VAR =
RUNTIME =
HELP    =
BYWORD  =

! clear
CMD_VAR = has_clear
RUNTIME =
HELP    = Clear statistics
BYWORD  = clear : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_one_pps_tod_statistics(session_id, has_clear));

CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp servo best-master <0-3>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: servo
! 4: best-master
! 5: <0-3>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_servo_best_master(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp <0-3> path-trace

DOC_CMD_DESC    = Dump path trace received from master
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = debug ptp 0 path-trace

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: path-trace

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Dump path trace received from master

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_path_trace(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = debug ptp <0-3> 802-1as clock-status

DOC_CMD_DESC    = Dump 802.1as status parameters for the clock
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = debug ptp 0 802-1as status

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: 802_1as
! 5: status

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP = Dump internal 802.1as status parameters

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_802_1as_status(session_id, clockinst));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = debug ptp <0-3> 802-1as port-status [ <port_type_list> ]

DOC_CMD_DESC    = Dump 802.1as status parameters for ports
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = debug ptp 0 802-1as port-status gi 1/1-4

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: 802_1as
! 5: port-status
! 6: <port_type_list>

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR =
CMD_VAR = v_port_type_list

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP = ##ICLI_HELP_DEBUG
HELP = ##ICLI_HELP_PTP
HELP =
HELP =
HELP = Dump internal 802.1as port status parameters
HELP = Interface id

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_802_1as_port_status(session_id, clockinst, v_port_type_list));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp <0-3> tod-delta <0-65535> <0-4294967295> <0-1000000000> [neg]

DOC_CMD_DESC    = set delta time of day
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = debug ptp 0 tod-delta 0 300 500000000

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: tod-delta
! 5: <0-65535> 
! 6: <0-4294967295>
! 7: <0-1000000000>
! 8: neg

CMD_VAR =
CMD_VAR =
CMD_VAR = domain
CMD_VAR = 
CMD_VAR = sec_msb
CMD_VAR = sec_lsb
CMD_VAR = nanosec
CMD_VAR = has_neg


RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP = ##ICLI_HELP_DEBUG
HELP = ##ICLI_HELP_PTP
HELP = Clock domain [0..3]
HELP = Set delta time of day
HELP = Set seconds MSB [0..65535]
HELP = Set seconds LSB [0..4294967295]
HELP = Set nanoseconds [0..1000000000]
HELP = Set if negative delta time

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_set_ptp_delta_time(session_id, domain, sec_msb, sec_lsb, nanosec, has_neg));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp servo source

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: servo
! 4: source

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_show_servo_source(session_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = show ptp servo mode-ref

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: servo
! 4: mode-ref

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_show_servo_mode_ref(session_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug no ptp servo best-master

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: no
! 3: ptp
! 4: servo
! 5: best-master

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_servo_best_master(session_id, -1));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_ZLS30387)

COMMAND = debug ptp ms-pdv log-level <0-5>

DOC_CMD_DESC    = 
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = debug ptp ms-pdv log-level 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: ms-pdv
! 4: log-level
! 5: <0-3>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = 
CMD_VAR = loglevel

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD = 
BYWORD = 
BYWORD = <Loglevel : 0-3>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_mspdv_loglevel(session_id, loglevel));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_ZLS30387)

COMMAND = no debug ptp ms-pdv log-level

DOC_CMD_DESC    = 
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no debug ptp ms-pdv log-level

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: no
! 2: debug
! 3: ptp
! 4: ms-pdv
! 5: log-level


CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = 
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD = 
BYWORD = 
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_debug_mspdv_loglevel(session_id, -1));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_ZLS30387)

COMMAND = show ptp ms-pdv psl-fcl-config cgu <0-3>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: ms-pdv
! 4: psl-fcl-config
! 5: cgu
! 6: <0-3>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = cgu_id

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_show_psl_fcl_config(session_id, cgu_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_ZLS30387)

COMMAND = show ptp ms-pdv path-statistics cgu <0-3>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: ms-pdv
! 4: path-statistics
! 5: cgu
! 6: <0-3>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = cgu_id

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_show_apr_statistics(session_id, cgu_id, 0));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_ZLS30387)

COMMAND = show ptp ms-pdv cur-path-delays cgu <0-3>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: ms-pdv
! 4: cur-path-delays
! 5: cgu
! 6: <0-3>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = cgu_id

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_show_apr_statistics(session_id, cgu_id, 1));
CODE_END

CMD_END
!==============================================================================

CMD_BEGIN

IF_FLAG = defined(VTSS_SW_OPTION_ZLS30387)

COMMAND = show ptp ms-pdv all-apr-statistics cgu <0-3>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: ms-pdv
! 4: all-apr-statistics
! 5: cgu
! 6: <0-3>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = cgu_id

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_show_apr_statistics(session_id, cgu_id, 2));
CODE_END

CMD_END
!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> mgtSettableLogGptpCapableMessageInterval { <-7-4> | stop | default }

DOC_CMD_DESC    = Set gptp capable tlv interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 mgtSettableLogGptpCapableMessageInterval -4

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: gptp-message-interval
! 4: <-7-4>
! 5: stop
! 6: default

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = interval
CMD_VAR = has_stop
CMD_VAR = has_default

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME = 
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME = ptp_icli_runtime_802_1as_present


HELP =
HELP = Clock instance usemgtSettableLogGptpCapableMessageInterval
HELP =
HELP = LogGptpInterval <-7 to 4>
HELP = 802.1AS profile only: stop sending GptpCapableMessageInterval messages
HELP = 802.1AS profile only: use the initial GptpCapableMessageInterval value

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = stop : Option
BYWORD = default : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_mgtSettable_gptp_interval_set(session_id, clockinst, interval, has_stop, has_default, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> useMgtSettableLogGptpCapableMessageInterval  <0-1>

DOC_CMD_DESC    = Set OPTION to configure gptp interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 usemgtSettableLogGptpCapableMessageInterval 0

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: option to configure gptp-interval
! 4: <0-1>


CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = usemgtSettableLogGptpCapableMessageInterval


RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =


HELP =
HELP = Clock instance 0-3
HELP = option to set sync interval
HELP = setting 1 alters gptp-interval to configured mgtSettableLogGptpCapableMessageInterval


BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <usemgtSettableLogGptpCapableMessageInterval : 0-1>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_usemgtSettable_gptp_interval_set(session_id, clockinst, usemgtSettableLogGptpCapableMessageInterval, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> gptp-to <1-255>

DOC_CMD_DESC    = Set the G802.1AS gPtpCapableReceiptTimeout value for the port to a number of gptpCapable message TimeInterval's
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set the G802.1AS gPtpCapableReceiptTimeout value for the port to a number of gptpCapable message TimeInterval's
DOC_CMD_EXAMPLE = ptp 0 gptp-to 5

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: gptp-to
! 4: <1-255>

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = gptp_to

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Clock instance [0-3]
HELP = Set the gPtpCapableReceiptTimeout value for the port
HELP = The gPtpCapableReceiptTimeout value for the port in number of gPtpCapable message TimeInterval's.

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD = <gPtpCapableReceiptTimeout : 1-255>

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_gptp_to_set(session_id, clockinst, TRUE, gptp_to, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp <0-3> gptp-to

DOC_CMD_DESC    = Set the G802.1AS gPtpCapableReceiptTimeout value for the port to the default value
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   = Set the G802.1AS gPtpCapableReceiptTimeout value for the port to the default value
DOC_CMD_EXAMPLE = no ptp 0 gptp-to

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: gptp-to

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance [0-3]
HELP = Set the gPtpCapableReceiptTimeout value for the port to the default value

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_gptp_to_set(session_id, clockinst, FALSE, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> gptp-interval { <int> | stop | default }

DOC_CMD_DESC    = Set gptp capable message interval
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp 0 gptp-interval -4

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: gptp-interval
! 4: <int>
! 5: stop
! 6: default

CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =
CMD_VAR = interval
CMD_VAR = has_stop
CMD_VAR = has_default

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME = 
RUNTIME = ptp_icli_runtime_802_1as_present
RUNTIME = ptp_icli_runtime_802_1as_present

HELP =
HELP = Clock instance 0-3
HELP = Set gptp interval
HELP = LogGptpInterval
HELP = 802.1AS profile only: instructs the peer to stop sending gptp messages
HELP = 802.1AS profile only: instructs the peer to use the initial value

BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =
BYWORD =
BYWORD = stop : Option
BYWORD = default : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_gptp_interval_set(session_id, clockinst, interval, has_stop, has_default, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = no ptp <0-3> gptp-interval

DOC_CMD_DESC    = Set gptp interval to default
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp 0 gptp-interval

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: <0-3>
! 4: gptp-interval

CMD_VAR =
CMD_VAR =
CMD_VAR = clockinst
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Clock instance 0-3
HELP = Set gptp interval to default

BYWORD =
BYWORD =
BYWORD = <Clockinst : 0-3>
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
ICLI_RC(ptp_icli_port_gptp_interval_set(session_id, clockinst, 0, FALSE, TRUE, plist));
CODE_END

CMD_END
!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp cmlds delay-asymmetry <-100000-100000>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: cmlds
! 3: delay-asymmetry
! 4: <-100000-100000>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_minus_100000_to_100000

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Set Path delay asymmetry
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_delay_asym_set(session_id, v_minus_100000_to_100000, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp cmlds delay-asymmetry

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: cmlds
! 4: delay-asymmetry

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_delay_asym_set(session_id, 0, plist));
CODE_END

CMD_END
!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = show ptp cmlds { port-state | port-ds | port-statistics } interface <port_type_list>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: cmlds
! 4: port-state
! 5: port-ds
! 6: port-statistics
! 7: interface
! 8: <port_type_list>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = has_port_state
CMD_VAR = has_port_ds
CMD_VAR = has_port_statistics
CMD_VAR =
CMD_VAR = v_port_type_list

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Common Mean Link Delay Service
HELP = CMLDS Port Status
HELP = CMLDS Port Configuration data structure
HELP = CMLDS Port Statistics
HELP = interface name
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD = port-state : Option
BYWORD = port-ds : Option
BYWORD = port-statistics : Option
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_port_data_show(session_id, has_port_state, has_port_ds, has_port_statistics, v_port_type_list));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp cmlds pdelay-thresh <0-4000000000>

DOC_CMD_DESC    = Set the Peer delay threshold value for the CMLDS service on the port.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp cmlds pdelay-thresh 800

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: cmlds
! 3: pdelay-thresh
! 4: <0-4000000000>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_0_to_4000000000

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Set the Mean Link delay threshold value for the CMLDS port
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_pdelay_thresh_set(session_id, TRUE, v_0_to_4000000000, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp cmlds pdelay-thresh

DOC_CMD_DESC    = Clear the Peer delay threshold value for the CMLDS service on the port.
DOC_CMD_DESC    = After clearing, the peer delay threshold will be set to Maximum time interval.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = no ptp cmlds pdelay-thresh

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: cmlds
! 4: pdelay-thresh

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Clear the existing Mean link delay threshold value for the CMLDS port. Peer delay threshold will be set maximum time interval.

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_pdelay_thresh_set(session_id, FALSE, 0, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp cmlds compute-meanlinkdelay [ force ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: cmlds
! 3: compute-meanlinkdelay
! 4: force

CMD_VAR = 
CMD_VAR = 
CMD_VAR = 
CMD_VAR = has_force

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = 
HELP = Compute the Mean Link Delay to neighbor 
HELP = useMgtSettableComputeMeanLinkDelay : Use managament set value as preferred one over value provided by Link Delay Interval machine

BYWORD =
BYWORD =
BYWORD =
BYWORD = force : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_mean_link_delay(session_id, TRUE, has_force, plist));
CODE_END

NO_FORM_CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_mean_link_delay(session_id, FALSE, has_force, plist));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp cmlds pdelayreq-interval { <-7-5> | stop | default } [ force ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: cmlds
! 3: pdelayreq-interval
! 4: <-7-5>
! 5: stop
! 6: default
! 7: force

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_minus_7_to_5
CMD_VAR = has_stop
CMD_VAR = has_default
CMD_VAR = has_force

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Set Peer delay request interval
HELP =
HELP = instructs the peer to stop sending PDelay_Req messages
HELP = instructs the peer to use the initial value
HELP = useMgtSettableLogPdelayReqInterval : Use managament set value as preferred one over value provided by Link Delay Interval machine

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = stop : Option
BYWORD = default : Option
BYWORD = force : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_pdelay_req_int_set(session_id, TRUE, v_minus_7_to_5, has_stop, has_default, has_force, plist));
CODE_END

NO_FORM_CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_pdelay_req_int_set(session_id, FALSE, v_minus_7_to_5, has_stop, has_default, has_force, plist));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = no ptp cmlds pdelayreq-interval

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_LOOSELY

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: no
! 2: ptp
! 3: cmlds
! 4: pdelayreq-interval

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = set Peer delay request interval to default value

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_pdelay_req_int_set(session_id, FALSE, 0, FALSE, FALSE, FALSE, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp cmlds allow-lost-resp <0-10>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: cmlds
! 3: allow-lost-resp
! 4: <0-10>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_0_to_10

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Common Mean Link Delay Service
HELP = Set the allowedFaults value for the port
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_allow_lost_resp_set(session_id, TRUE, v_0_to_10, plist));
CODE_END

NO_FORM_CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_allow_lost_resp_set(session_id, FALSE, v_0_to_10, plist));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp cmlds allow-faults <1-255>

DOC_CMD_DESC    = Set the 802.1AS allowedFaults value for the CMLDS service of this port
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: cmlds
! 3: allow-faults
! 4: <1-255>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_1_to_255

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Common Mean Link Delay Service
HELP = Set the allowedFaults value for the port
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_allow_faults_set(session_id, TRUE, v_1_to_255, plist));
CODE_END

NO_FORM_CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_allow_faults_set(session_id, FALSE, v_1_to_255, plist));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp cmlds compute-neighbor-rate-ratio [ force ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: cmlds
! 3: compute-neighbor-rate-ratio
! 4: force

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = has_force

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = Common Mean Link Delay Service
HELP = Compute the neighbor rate ratio 
HELP = useMgtSettableComputeNeighborRateRatio : Use managament set value as preferred one over value provided by Link Delay Interval machine

BYWORD =
BYWORD =
BYWORD =
BYWORD = force : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_nbr_rate_ratio(session_id, TRUE, has_force, plist));
CODE_END

NO_FORM_CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_nbr_rate_ratio(session_id, FALSE, has_force, plist));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp cmlds statistics [ clear ]

DOC_CMD_DESC    = Clear the PTP cmlds statistics
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE = ptp cmlds statistics clear

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: cmlds
! 3: statistics
! 4: clear

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = has_clear

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Common mean link delay service statistics
HELP = Clear the CMLDs statistics

BYWORD =
BYWORD =
BYWORD =
BYWORD = clear : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_statistics_clear(session_id, has_clear, plist));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = ptp <0-3> compute-neighbor-rate-ratio [ force ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: compute-neighbor-rate-ratio
! 4: force

CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR = has_force

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Compute the neighbor rate ratio 
HELP = force indicates to use management settable compute-neighbor-rate-ratio 

BYWORD =
BYWORD =
BYWORD =
BYWORD = force : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ptp_icli_port_compute_nbr_rate_ratio_set(session_id, v_0_to_3, TRUE, has_force, plist);
CODE_END

NO_FORM_CODE_BEGIN
    ptp_icli_port_compute_nbr_rate_ratio_set(session_id, v_0_to_3, FALSE, has_force, plist);
NO_FORM_CODE_END
CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =defined (VTSS_SW_OPTION_P802_1_AS) 

COMMAND = ptp <0-3> compute-meanlinkdelay [ force ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: compute-meanlinkdelay
! 4: force

CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR = has_force

RUNTIME = icli_is_switchport_runtime
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Compute the Mean Link Delay to neighbor 
HELP = force indicates to use management settable compute Mean Link Delay 

BYWORD =
BYWORD =
BYWORD =
BYWORD = force : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ptp_icli_port_compute_mean_link_delay_set(session_id, v_0_to_3, TRUE, has_force, plist);
CODE_END

NO_FORM_CODE_BEGIN
    ptp_icli_port_compute_mean_link_delay_set(session_id, v_0_to_3, FALSE, has_force, plist);
NO_FORM_CODE_END
CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = defined (VTSS_SW_OPTION_P802_1_AS)

COMMAND = show ptp cmlds default-ds

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: show
! 2: ptp
! 3: cmlds
! 4: default-ds

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP = 
HELP = 
HELP = 
HELP = CMLDS Default data structure

BYWORD = 
BYWORD = 
BYWORD = 
BYWORD = 

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_cmlds_default_ds_show(session_id));
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> not-master

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_INTERFACE_PORT_LIST
MODE_VAR = plist

! 1: ptp
! 2: <0-3>
! 3: not-master

CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Avoid ptp attaining master state. If BMCA decides port as master, it would go into passive state.

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_port_not_master_set(session_id, v_0_to_3, plist, TRUE));
CODE_END

NO_FORM_CODE_BEGIN
    ICLI_RC(ptp_icli_port_not_master_set(session_id, v_0_to_3, plist, FALSE));
NO_FORM_CODE_END
CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> internal src-clk-domain <0-6>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: internal
! 4: src-clk-domain
! 5: <0-6>

CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR =
CMD_VAR = v_1_to_6

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Internal mode configuration
HELP = Source clock domain for internal mode.
HELP = clock domain number.

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    bool vtss_local_clock_src_clk_domain_set(uint32_t inst, int32_t srcClkDomain);
    vtss_local_clock_src_clk_domain_set(v_0_to_3, v_1_to_6);
CODE_END

NO_FORM_CODE_BEGIN
    bool vtss_local_clock_src_clk_domain_set(uint32_t inst, int32_t srcClkDomain);
    vtss_local_clock_src_clk_domain_set(v_0_to_3, -1);
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp <0-3> internal sync-rate <-7-1>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: <0-3>
! 3: internal
! 4: sync-rate
! 5: <-7-1>

CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR =
CMD_VAR = v_minus_7_to_1

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Internal mode configuration
HELP = Synchronisation rate of internal device in logairthmic intervals
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ptp_icli_internal_mode_sync_rate_set(session_id, v_0_to_3, v_minus_7_to_1, true);
CODE_END

NO_FORM_CODE_BEGIN
    ptp_icli_internal_mode_sync_rate_set(session_id, v_0_to_3, v_minus_7_to_1, false);
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp timers

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: timers

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP = Show PTP timers

BYWORD =
BYWORD =
BYWORD =

CODE_BEGIN
    void vtss_ptp_timers_dump(u32 session_id, i32 (*pr)(u32 session_id, const char *fmt, ...));
    vtss_ptp_timers_dump(session_id, icli_session_printf);
CODE_END
CMD_END

!==============================================================================
CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp basic-servo hybrid { enable | disable }

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: basic-servo
! 4: hybrid
! 5: enable
! 6: disable

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = has_enable
CMD_VAR = has_disable

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = enable : Option
BYWORD = disable : Option

VARIABLE_BEGIN
    bool enable = false;
VARIABLE_END

CODE_BEGIN
    if (has_enable) {
        enable = true;
    } else if (has_disable) {
        enable = false;
    }
    ptp_icli_debug_basic_servo_hybrid_enable(session_id, enable);
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp auto-dly-resp <0-2> [ ena | dis ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: auto-dly-resp
! 4: <0-2>
! 5: ena
! 6: dis

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_0_to_2
CMD_VAR = has_ena
CMD_VAR = has_dis

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = clock domain for which auto delay response feature must be set.
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD = ena : Option
BYWORD = dis : Option

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    bool ptp_auto_delay_resp_set(uint32_t clk_domain, bool set, bool enable);
    bool enable = has_ena ? true : has_dis ? false : false;
    bool set = has_ena | has_dis;
    bool ret = ptp_auto_delay_resp_set(v_0_to_2, set, enable);
    if (!set) {
        ICLI_PRINTF(" Auto delay response for clock domain %d %s\n", v_0_to_2, ret ? "enabled":"disabled");
    }
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = ptp phy-ts dis

DOC_CMD_DESC    = Disable phy timestamping on ports having phy timestamping capability.
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  =

CMD_MODE = ICLI_CMD_MODE_GLOBAL_CONFIG
MODE_VAR =

! 1: ptp
! 2: phy-ts
! 3: dis

CMD_VAR =
CMD_VAR =
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP = phy timestamping.
HELP = disable phy timestamping and use switch timestamping.

BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_phy_timestamp_dis_set(session_id, TRUE));
CODE_END

NO_FORM_CODE_BEGIN
    ICLI_RC(ptp_icli_phy_timestamp_dis_set(session_id, FALSE));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp <0-3> soft-clk pps-dom <1-2>

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: soft-clk
! 5: pps-dom
! 6: <1-2>

CMD_VAR =
CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =
CMD_VAR =
CMD_VAR = v_1_to_2

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = software clock specific configuration.
HELP = Chip clock domain used for generating 1pps signal.
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ICLI_RC(ptp_icli_software_clock_pps_domain_set(session_id, v_0_to_3, v_1_to_2, true));
CODE_END

NO_FORM_CODE_BEGIN
    ICLI_RC(ptp_icli_software_clock_pps_domain_set(session_id, v_0_to_3, v_1_to_2, false));
NO_FORM_CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG =

COMMAND = debug ptp <0-3> soft-clk

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: <0-3>
! 4: soft-clk

CMD_VAR =
CMD_VAR =
CMD_VAR = v_0_to_3
CMD_VAR =

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP = Display software clock data

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
    ptp_icli_software_clock_show_data(session_id, v_0_to_3);
CODE_END

CMD_END

!==============================================================================

CMD_BEGIN

IF_FLAG = PTP_UNIT_TEST

COMMAND = debug ptp test [ <1-1000> ]

DOC_CMD_DESC    =
DOC_CMD_DEFAULT =
DOC_CMD_USAGE   =
DOC_CMD_EXAMPLE =

FUNC_NAME =
FUNC_REUSE =

PRIVILEGE = ICLI_PRIVILEGE_15
PROPERTY  = ICLI_CMD_PROP_GREP

CMD_MODE = ICLI_CMD_MODE_EXEC
MODE_VAR =

! 1: debug
! 2: ptp
! 3: test
! 4: <1-1000>

CMD_VAR =
CMD_VAR =
CMD_VAR =
CMD_VAR = v_1_to_1000

RUNTIME =
RUNTIME =
RUNTIME =
RUNTIME =

HELP =
HELP =
HELP =
HELP =

BYWORD =
BYWORD =
BYWORD =
BYWORD =

VARIABLE_BEGIN
VARIABLE_END

CODE_BEGIN
extern void runAllTests(i32 session_id, uint32_t id);

runAllTests(session_id, v_1_to_1000);
CODE_END

CMD_END
